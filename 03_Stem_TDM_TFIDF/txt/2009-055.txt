BERLIN

SFB 6 4 9 E C O N O M I C R I S K

SFB 649 Discussion Paper 2009-055
Representations for optimal stopping under
dynamic monetary utility functionals
Volker Kr‰tschmer* John Schoenmakers*
* Weierstrass Institute Berlin, Germany
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".
http://sfb649.wiwi.hu-berlin.de ISSN 1860-5664
SFB 649, Humboldt-Universit‰t zu Berlin Spandauer Straﬂe 1, D-10178 Berlin

Representations for optimal stopping under dynamic monetary utility functionals
Volker Kra®tschmer and John Schoenmakers
Abstract In this paper we consider the optimal stopping problem for general dynamic monetary utility functionals. Sufficient conditions for the Bellman principle and the existence of optimal stopping times are provided. Particular attention is payed to representations which allow for a numerical treatment in real situations. To this aim, generalizations of standard evaluation methods like policy iteration, dual and consumption based approaches are developed in the context of general dynamic monetary utility functionals. As a result, it turns out that the possibility of a particular generalization depends on specific properties of the utility functional under consideration.
Keywords: monetary utility functionals, optimal stopping, duality, policy iteration.
JEL Classification: C61, C63, G12, G13. AMS 2000 Subject Classification: 49L20 60G40 91B16.
1 Introduction
Dynamic monetary utility functionals, or DMU functionals for short, can be seen as generalizations of the ordinary conditional expectation, the usual functional which is to be maximized in standard stopping problems, which occur for instance in the theory of pricing of American (Bermudan) options in a complete market. It is well known that in an incomplete market the price of an American option is determined by the so called upper and lower Snell envelope which in turn are obtained via optimal stopping of the reward process with respect to two particular mutually conjugate DMU functionals (cf. e.g. [15]). From an economic point of view, dynamic monetary utility functionals functionals may be seen as representations of dynamic preferences in terms of utilities of financial investors. By changing sign, a DMU functionals becomes a dynamic risk measure (e.g. in [21]) which represents preferences in terms of losses instead of utilities in fact. Therefore, technically, the study of DMU functionals is basically equivalent to the study of dynamic risk measures which became an increasing research field in the last years. A realistic dynamic risk assessment of financial positions should allow for updating as time evolves, taking into account new information. The notion of dynamic risk measures has been
Partially supported by the Deutsche Forschungsgemeinschaft through SFB 649 "Economic Risk" and DFG Research Center Matheon "Mathematics for Key Technologies" in Berlin. Weierstrass Institute for Applied Analysis and Stochastics, Mohrenstr. 39, 10117 Berlin, {kraetsch,schoenma}@wias-berlin.de .
1

established to provide a proper framework (cf. e.g. [3], [8], [10], [11], [14]). It is based on an axiomatic characterization extending the classical axioms for the concept of one-period risk measures in [2] to the dynamic multiperiod setting. From the very beginning one crucial issue was to find reasonable conditions of mutual relationships between the risk functionals, so-called dynamic consistency, leading to different concepts (cf. e.g. [3], [8], [10], [11], [30], [31], [33], [34]). The mostly used one is often called strict time consistency, and it is linked with a technical condition for dynamic risk measures known as recursiveness. This condition will play an important technical role in our investigations. Recently, dynamic monetary utility functionals (as being dynamic risk measures with changed sign) have been incorporated into different topics such as, for example, the dynamics of indifference prices (see [21], [9]), and the pricing of derivatives in incomplete financial markets (cf. e.g. [30], [15], [28]). In this respect we want to emphasize the contributions in [15] and [28] as being the starting point of this paper. There the superhedging of American options is analyzed as solutions of optimal stopping problems in the context of coherent dynamic monetary utility functionals. We want to extend these considerations to more general monetary utility functionals. For instance, we will not necessarily assume translation invariance which has been recently questioned as a suitable condition for risk assessment since it tacitly supposes certainty on discounting factors by the investors (cf. [13]). Within a time discrete setting we shall look for a minimal set of conditions for the dynamic monetary utility functionals which guarantee solutions for the related optimal stopping problems at different times. For classical stopping problems with respect to ordinary conditional expectations the starting point for any solution representation is the Bellman principle. This suggests to investigate when the Bellman principle holds for the general optimal stopping problems. The above mentioned condition of recursiveness in connection with a specific regularity condition will turn out to be sufficient. Beyond the considerations of the general optimal stopping, the main contribution of this paper is the development of iterative methods and other representations for solving them. Based on these methods we naturally construct simulation based solution algorithms which allow for solving such stopping problems in practice. In contrast to meanwhile industrial standard approaches for Bermudan options, hence the ordinary stopping problem in discrete time (among others, [1], [6], [22], [24], [32]), we have not seen yet a comprehensive generic approach for treating generalized optimal stopping problems numerically. In this respect this paper intends to be a first step in this direction. The paper is organized as follows. In Section 2 the concept of dynamic monetary utility functionals is introduced. In Section 3 we investigate the Bellman principle and the existence of optimal stopping strategies. In Section 4 a generalization of the policy iteration method of [22] is presented. Section 5, Section 6, and Section 7 generalize, respectively, the additive dual method of [29]-[17], the multiplicative dual of [20], and the consumption based approach in [4]-[5]. In Section 8 we shall provide a simulation setting to utilize the results of sections 4-7 to construct approximations of the optimal values of the investigated stopping problems. More technical proofs are given in Appendix A.
2 Dynamic monetary utility functionals
Let , (Ft)t{0,...,T }, F , P be filtered probability space with {0, 1}-valued P |F0, and let X be a real vector subspace of L0(, F, P) containing the indicator mappings 1A of subsets A  F. It is assumed that for any X  X and A  F it holds 1AX  X, A  F. Moreover, for any X, Y  X and it holds X  Y  X and X  Y  X. Hence in particular X is a vector lattice. A family of mappings  := (t)t{0,...,T } with t : X  X  L0(, Ft, P) being monotone, i.e. t(X)  t(Y ) for X, Y  X with X  Y P -a.s.. is called a dynamic monetary utility functional or shortly
2

DMU functional.
We shall say that (t)t{0,...,T } is recursively generated if there is some family (t)t{0,...,T } of mappings t : X  L0(, Ft+1, P)  X  L0(, Ft, P) with FT +1 := F such that

T = T , and t = t  t+1 for t = 0, ..., T - 1.

In this case the mappings t will be given the name generators of (t)t{0,...,T } . Let us introduce some further notations. Henceforth Tt will stand for the set of the finite stopping times
 with   t P -a.s., whereas H will denote the set of adapted processes Z := (Zt)t{0,...,T } such that Zt  X  L0(, Ft, P) for t  {0, ..., T }.
The following conditions on (t)t{0,..,T } will play an important role in the context of optimal stopping of DMU functionals studied later on.

(C1) t(X)  t(Y ) P -a.s. for t  {0, ..., T - 1}, X, Y  X with t+1(X)  t+1(Y ) P -a.s. (time consistency).

(C2) t(1AX) = 1At(X) P -a.s. for t  {0, ..., T }, A  Ft, and X  X (regularity).
(C3) t(X + Y ) = t(X) + Y P -a.s. for t  {0, ...T }, and X, Y  X with Y being Ft-measurable (conditional translation invariance).

(C4) t = t  t+1 P -a.s. for t  {0, ..., T - 1} (recursiveness).
(C5) t(0) = 0 P -a.s. for t  {0, ..., T } (normalization).
(C6) t(Y X) = Y t(X) P -a.s. for t  {0, ..., T }, X  X and Y  X  L0(, Ft, P) with Y  0 P -a.s. as well as XY  X (conditional positive homogeneity)

(C7) For each X  X with X  0 P -a.s. there exist a function g : [0, )  R+ such that lim0 g() = 0,

and

t (X  )  t (X) + g() for t  {0, ..., T }.

(1)

Remark 2.1 In this paper we frequently use one of the following implications. Their proofs are simple and therefore omitted.

∑ Recursiveness implies that (t)t{0,..,T } is recursively generated, where the generators are the restrictions t|X  L0(, Ft+1, P) for t = 0, ..., T.
∑ Let (t)t{0,..,T } be recursively generated by (t)t{0,..,T }. Then,
≠ If t(X) = X P -a.s. for t  {0, ..., T } and X  XL0(, Ft, P), then (t)t{0,..,T } is recursive. ≠ If t(X) = X P -a.s. for t  {0, ..., T } and X  X  L0(, Ft, P), then (t)t{0,..,T } is
recursive.
≠ iii) If for any X  X and A  Ft it holds t(1AX) = 1At(X), then  is regular.

Example 2.2 The functional  given by the conditional expectations t := E[∑ | Ft] is a basic example for a DMU functional. It satisfies all the conditions (C1)-(C7).

3

It is natural to generalize the usual martingale concept to the notion of "-martingale" for a given DMU functional  as defined below. The notion of -martingales will be used for different representations of optimal stopping problems in Sections 5,6.

Definition 2.3 M := (Mt)t{0,...,T }  H is aid to be a -martingale if t(Mt+1) = Mt P -a.s. for every t  {0, ..., T - 1}. Note that for recursive , M  H is a -martingale if and only if t(Ms) = Mt P -a.s. for every s, t  {0, ..., T - 1} with s > t.
Let us discuss some further examples of DMU functionals. First of all we want to consider the relationship with the so called dynamic risk measures.

Example 2.4 DMU functionals may be viewed as generalizations of dynamic risk measures. Recall, a family (t)t{0,...,T } is a dynamic risk measure if and only if (-t)t{0,...,T } is a conditionally translation invariant monetary utility functional. The property of translation invariance suggests to restrict considerations to normalized functionals because of t(X -t(X)) = 0. In the normalized case t(Y ) = Y P -a.s. for every t  {0, ..., T } and any Y  X  L0(, Ft, P), and in view of Remark 2.1  is recursively generated if and only if it is recursive. We shall call the normalized conditional translation invariant  to be convex/concave if the mappings t (t  {0, ..., T }) are simultaneously convex/concave. If  is convex/concave, then
t : X  X  L0(, Ft, P), X  -t(-X)

defines a concave/convex normalized conditional translation invariant DMU functional called the conju-

gate of . The conditions of recursiveness and regularity are satisfied by  if and only its conjugate 

fulfills them. Conditional translation invariance of convex/concave  implies the regularity condition for

the restriction of  to XL(, F, P) (cf. [21], where this restriction is essential for the proof). Moreover,

regularity

is

even

valid

on

the

entire

space

X

if

lim
n

t

((X

-

n)+)

=

0

P -a.s.

for every t  {0, ..., T }

and any nonnegative X  X. Indeed, one may conclude from Lemma 6.5 in [23] that

t(X) = ess inf ess sup t(X+  n - X-  m)
mN nN
holds for t  {0, ..., T } and X  X. In the context of dynamic risk measures the property of recursiveness plays an important role. On the one hand it is intimately linked with the property of time consistency which has a specific meaning in expressing dynamic preferences of investors. For a thorough study the reader may consult e.g. [14] or [3]. On the other hand optimal stopping with dynamic risk measures may be related to specific financial applications.

The next large class of DMU functionals concerns the so called g-expectations. They are prominent examples of nonlinear functionals satisfying martingale type properties like recursiveness.

Example 2.5 Let (Gs)s0 be the augmented filtration on  associated with the filtration generated by a standard d-dimensional Brownian motion (Bs)s0 with B0 := 0, and let for S > 0 the function g :  ◊ [0, S] ◊ R ◊ Rd  R satisfy
(i) There is some constant C > 0 such that

|g(∑, t, y1, z1) - g(∑, t, y2, z2)|  C (|y1 - y2| + z1 - z2 ) P -a.s.
for every t  [0, S] and arbitrary (y1, z1), (y2, z2)  R ◊ Rd, where ∑ denotes an arbitrary norm on Rd;

4

(ii) (g(∑, s, y, z))s[0,S] is an adapted P -square integrable process for (y, z)  R ◊ Rd; (iii) g(∑, s, y, 0) = 0 P -a.s. for s  [0, S] and y  R. Such a function g can be used as driver of a backward stochastic differential equation (abbreviated: BSDE)

SS
Ys = X + g(∑, r, Yr, Zr) dr - Zr dBr for s  [0, S],
ss
where X  L2(, GS, P). As shown is [25] there always exists a unique couple YsX s[0,S] and ZsX s[0,S] of adapted respectively 1- and d-dimensional processes satisfying

S  S



EP  |YsX |2 ds , EP  ZsX 2 ds < ,

00

and solving the BSDE. Now it is natural to define the family (Eg[∑|Gs])s[0,S] via

Eg[∑ | Gs] : L2(, GS, P)  L2(, Gs, P), X  YsX ,

known as (a family of) conditional g-expectations, where Eg[∑ | G0] is just called g-expectation. For g  0 we retrieve the usual (conditional) expectation of a square integrable random variable. For
applications of conditional g-expectations in finance the reader is referred to [12] and [26].
Let us now pick some observation times 0 =: s0 < s1 < ... < sT := S, and define , (Ft)t{0,...,T }, F , P and  := (t)t{0,...,T } by Ft := Gst , F := FT , and t := Eg[∑ | Gst ]. Drawing on basic properties of conditional g-expectation as derived by Peng in [25],  is always a regular recursive DMU functional
fulfilling t(X) = X P -a.s. for t  {0, ..., T } and Ft-measurable X. Furthermore  is conditional translation invariant if and only if g(, s, ∑, z) is constant for every   , s  [0, S] and z  Rd (for the if part see [25], for the only if part cf. [19]). In this case  is even a
convex normalized conditionally translation invariant DMU functional if and only if in addition

g(∑, ∑, ∑, z1 + (1 - )z2)  g(∑, ∑, ∑, z1) + (1 - )g(∑, ∑, ∑, z2) P dt - a.s. for z1, z2  Rd and   [0, 1] (cf. [19]). We shall finish the section with some nonstandard examples. Examples 2.6 Let X = L(, F , P).

1. For strictly increasing U1, ..., UK : R  R with U1(0) = ... = UK (0) = 0 and positive 1, ..., K , let  be recursively generated with generators (t)t{0,...,T } defined by

K
t(X) := kUk-1 (EP[Uk(X) | Ft]) for t  {0, ..., T } and X  L(, Ft, P).
k=1
K
Obviously the functional  is regular. Moreover, if k = 1, it satisfies t(X) = X P -a.s. for
k=1
t  {0, ..., T } and X  L(, Ft, P), hence  is recursive. In the case of K = 1 = 1, t is defined in literally the same way as its generator t.

5

2. For nonvoid sets Q1, ..., QK of probability measures on F which are equivalent with P, and positive 1, ..., K , let  be recursively with generators (t)t{0,...,T } defined by

K

t(X) := k ess sup EQ[X|Ft] for t  {0, ..., T }.

k=1

QQk

Similar as in the previous example  is regular by construction, and is recursive if in addition
K
1 = 1. Further,  is conditionally translation invariant, conditionally positively homogeneous,
k=1
and convex. Moreover, if K = 1 = 1, and if the set Q1 is stable under pasting (see [15] for the
concept), t is defined in literally the same way as its generator t (cf. [15], Theorem 6.53).

3 The optimal stopping problem

We will study the following stopping problem

Yt := ess sup t(Z ), t  {0, ..., T },
 Tt

(2)

for Z  H. We refer to the process Y  as the (-)Snell envelope of Z. Below we consider two important aspects. Firstly, we investigate the existence of optimal stopping times and secondly, we try to find Bellman principles. The crucial step to guarantee optimal stopping times is provided by thHorst, U*e following Lemma.

Lemma 3.1 Let Z := (Zt)t{0,...,T }  H, let for some fixed t  {0, ..., T - 1} exist some t+1  Tt+1

such

that

t+1(Zt+1 )

=

ess sup t+1(Z ).
 Tt+1

Defining

the

event

Bt

:=

t(Zt) - t(Zi+1 )  0

and t :=

t1Bt + i+11\Bt , we obtain Bt  Ft, t  Tt, and under the conditions of time consistency and regularity

t (Z t )

=

ess sup
 Tt

t(Z

)

=

t(Zt)



t(Zt+1 ).

Proof: Bt  Ft, t  Tt follows from Ft-measurability of the outcomes of t. Furthermore we may observe Zt = 1Bt Zt + 1\Bt Zi+1 . Then the application of (C1) yields

t(Zt )

=

1Bt t(Zt )

+

1\Bt t(Zt )

(C 2)
=

(1Bt Zt)

+

(1\Bt Zt+1 )

(C2)
=

1Bt t(Zt)

+

1\Bt t(Zt+1 )

= t(Zt)  t(Zt+1 ).

Next let us define the mapping  : Tt  Tt+1 by ( ) := (t + 1)1[=t] +  1[>t]. Then we obtain for   Tt

t(Z ) = t(1[=t]Zt + 1[>t]Z()) (C=2) 1[=t]t(Zt) + 1[>t]t(Z())  t(Zt)  t(Z()).

By assumption t+1(Z())  t+1(Zt+1 ) P -a.s. so that condition (C1) implies

P
t(Z )  t(Zt)  t(Z())  t(Zt)  t(Zt+1 ) = t(Zt ), which completes the proof.

6

Since  : T is always the optimal stopping time in FT , we may apply sequentially Lemma 3.1 to obtain the following result concerning the existence of optimal stopping times.

Theorem 3.2 Let Z := (Zt)t{0,...,T }  H. Then under conditions of time consistency and regularity there exists for any t  {0, ..., T } some t  Tt such that

t(Zt )

=

ess sup
 Tt

t(Zt).

The sequence (t)t{0,...,T } of optimal stopping times may be chosen such that T = T, and

1[t>t]t = 1[t>t]t+1 for any t  {0, ..., T - 1}.

Let us now turn over to recursively generated DMU functionals.

Corollary 3.3 Let (t)t{0,...,T } be recursively generated with generators (t)t{0,...,T } satisfying the property t(X)  t(Y ) P -a.s. for t  {0, ..., T -1} and X, Y  X L0(, Ft+1, P) with X  Y P -a.s..
Then Theorem 3.2 may be restated under regularity only.

Proof: The assumptions on the generators (t)t{0,...,T } imply the time consistency condition (C1).

In order to construct optimal stopping times a recursive relationship between the optimal values of the
stopping problems at different dates will turn out to be very useful. For this reason we shall restrict
ourselves to recursively generated DMU functionals generated by the functionals (t)t{0,...,T } . The following theorem is a direct consequence of Lemma 3.1 and Corollary 3.3.

Theorem 3.4 Let (t)t{0,...,T } be regular and recursively generated with generators satisfying the property t(X)  t(Y ) P -a.s. for t  {0, ..., T - 1} and X, Y  X  L0(, Ft+1, P) with X  Y P -a.s.
Then we have the Bellman principle: It holds:

ess sup t(Z ) = t(Zt)  t ess sup t+1(Z)

 Tt

Tt+1

for any Z  H and every t  {0, ..., T - 1}.

For a recursive DMU functional (t)t{0,...,T } the generators are just the restrictions t|XL0(, Ft+1, P) for t  {0, ..., T - 1}, and the Bellman principle may be strengthened in the following way.

Corollary 3.5 Let (t)t{0,...,T } be a DMU functional which is regular and recursive, and whose generators t|X  L0(, Ft+1, P), t  {0, ..., T - 1}, satisfy the monotonicity assumption in Corollary 3.3. It
then holds,

ess sup t(Z ) = t(Zt)  t ess sup t+1(Z)

 Tt

Tt+1

for any Z  H and every t  {0, ..., T - 1}.

7

Example 3.6 Let us consider the issue of pricing and hedging American contingent claims in an incom-
plete arbitrage free financial market with reference probability measure P and the set Q of equivalent
martingale measures, and let X consist of all X  L0(, F , P) such that sup EQ[|X|] < . Then the
QQ
functional t : X  X  L0(, Ft, P), X  ess sup EQ[X | Ft],
QQ

and its conjugate 

t (X )

=

ess inf
QQ

EQ[X

|

Ft]

are recursive (e.g. see [15], Proposition 6.45, Theorem 6.53) and play a key role in the following sense: For any Z  H the stopping problems (2) according to  and  correspond to the upper and lower Snell envelopes of Z w.r.t. Q respectively. Moreover, the initial value of the lower and upper snell envelope are just the lower and upper hedging price, respectively. Further, the optimal stopping time according to the lower hedging prices corresponds to optimal exercise strategy for the buyer of the option. For details see for example [15], Theorems 7.13, 7.14.

Example 3.7 Let  be a finite subfamily of conditional g-expectations. Then in view of Example 2.5 combined with Corollaries 3.3, 3.5 we may find for any Z  H some family (t)t{0,...,T } of stopping times t  Tt satisfying T = T as well as 1[t>t]t = 1[t>t]t+1, and

t(Z ) = ess sup t(Z ) = t(Zt)  t
 Tt

ess sup t+1(Z )
 Tt+1

= t(Zt)  t(Zt+1 )

for t  {0, ..., T - 1}.

Example 3.8 The DMU functionals introduced in Examples 2.6 admit families of optimal stopping times as in Corollary 3.3 and satisfy the Bellman principle due to Theorem 3.4.

4 Iterative solution of optimal stopping problems

Throughout this section we fix a recursively generated regular DMU functional (t)t{0,...,T } with gener-
ators (t)t{0,...,T } satisfying t(X)  t(Y ) P -a.s. for t  {0, ..., T } and X, Y  X  L0(, Ft+1, P) with X  Y P -a.s.. Then in view of Corollary 3.3, for any Z  H there exists a family (t)t{0,...,T } of stopping times t  Tt with

T = T, and 1[t>t]t = 1[t>t]t+1 for any t  {0, ..., T - 1},

(3)

such that

Yt

=

ess sup t(Z )
 Tt

=

t(Zt )

for

every

t



{0, ...,

T }.

(4)

Our goal is to develop an iterative procedure which converges to (4). In fact we shall generalize the policy iteration method in [22] for classical optimal stopping with conditional expectations to optimal stopping of regular recursive DMU functionals. Let us define (t)t{0,...,T } to be a time consistent stopping family if

t  Tt, T = T, and 1[t>t]t = 1[t>t]t+1 for t  {0, ..., T - 1}.

8

The policy iteration step starts with any time consistent stopping family (t)t{0,...,T } and corresponding process (Yt)t{0,...,T } with Yt := t(Zt ), being an approximation of (Yt)t{0,...,T } . In order to improve
this approximation we consider the process Yt t{0,...,T } defined by Yt := maxtsT t(Zs ), and the new stopping family

T := T,

t

:=

inf {s



{t, ...,

T}

|

s(Zs)



max
s+1uT

s(Zu )},

0  t  T - 1.

(5)

Obviously, the stopping family (^t)t{0,...,T } is also time consistent . By the next theorem, a generalization of Theorem 3.1 in [22] in fact, the process Yt t{0,...,T } , defined by Yt := t(Z^t ), improves the initial approximation (Yt)t{0,...,T } of (4).
Theorem 4.1 We have the inequalities

Yt  Yt  Yt  Yt, t  {0, ..., T }.
The proof of Theorem 4.1 is similar to the proof in [22]. However, it has to be focussed that it is sufficient that the DMU functional under consideration is regular and recursively generated. For the convenience of the reader the proof is therefore provided in Appendix A (while also comprising the structure of argumentation in [22] slightly). In view of Theorem 4.1 the idea is to construct recursively a sequence of pairs

(t(m))t{0,...,T }, (Yt(m))t{0,...,T } mN0

where (t(m))t{0,...,T } is a time consistent stopping family for any m  N0 such that Yt(m) = t(Zt(m) ),

and

t(m+1)

=

inf {s



{t,

...,

T}

|

s(Zs)



max
s+1uT

s(Zu(m) )}

for

t



{0, ..., T

-

1}.

Next we start with some time consistent stopping family (t(0))t{0,...,T }, for example, a canonical choice is t0 := t. Then due to Theorem 4.1, we have

Yt(0)  Yt(m)  Yt(m+1)  Yt(m+1)  Yt for m  N0, t  {0, ..., T },

(6)

where

Yt(m+1)

:=

max
tsT

t(Zs(m) ).

The iteration procedure may be stopped after at most T iterations, yielding an optimal stopping family.

Proposition 4.2 For t  {0, ..., T } we have

Yt(m) = Yt if m  T - t.
Hence t(m) is an optimal stopping time for the corresponding stopping problem at time t, if m  T - t, and in particular (t(m))t{0,...,T } is an optimal stopping family for m  T.
Proof: The proof may be done by adapting the proof of Proposition 4.4 in [22] in a similar way as is done for proving Theorem 4.1 and therefore omitted. Indeed, a closer inspection of the proof of Proposition 4.4 (in [22]) shows that only regularity, the fact that the DMU functional is recursively generated by a monotonic system (t), and the Bellman principle (see Theorem 3.4) is essential.

9

Examples 4.3
1. Referring to Example 3.6, Proposition 4.2 guarantees that the proposed iteration method provides a scheme to calculate super hedging prices and optimal exercises of discounted American options.
2. In view of Example 2.5 and Examples 2.6 the associated stopping problems may be solved iteratively by the introduced method. In particular we have a numerical scheme for optimal stopping with gexpectations.

5 Additive dual upper bounds

In this section the DMU functional  is assumed to be regular, conditional translation invariant, and recursive. In fact, regularity implies normalization (take A = ), which implies by conditional translation invariance t(Z) = Z for Ft-measurable Z, hence recursiveness. For clearness we will underline recursiveness nonetheless. For such a  we propose an additive dual representation for the stopping problem (2), in terms of -martingales introduced in Definition 2.3. As such this generalization may be seen as a generalization of the representation of [29], and [17] for the standard stopping problem. We first extend the classical additive Doob decomposition theorem.

Lemma 5.1 Let  be a regular, conditional translation invariant, and recursive DMU functional. Then for any Z := (Zt)t{0,...,T }  H there exists a unique pair (M, A)  H ◊ H of a -martingale M and a predictable process A, such that M0 = A0 = 0, and

Zt = Z0 + Mt + At for t  {0, ..., T }, P -a.s.

(7)

Proof: Define A recursively by A0 := 0, and At+1 := At + t(Zt+1) - Zt for t  {0, ..., T - 1}. Then of course A  H and A is predictable. Next define M  H via Mt := Zt - Z0 - At for t  {0, ..., T }. Obviously M0 = 0, and by conditional translation invariance (property (C3)),

t(Mt+1) =3) t(Zt+1) - Z0 - At+1 = t(Zt+1) - Z0 - (At + t(Zt+1) - Zt) = Zt - Z0 - At = Mt.

So M is a -martingale and (7) holds. Now let (M , A )  H ◊ H be another pair as stated. Then for t  {0, ..., T - 1} we may conclude by conditional translation invariance,

0 = t(Mt+1 - Mt) = t(Zt+1) - Zt + At - At+1,
in particular At+1 = At + t(Zt+1) - Zt. Hence by induction A = A, and so M = M.
The next lemma may be regarded as a generalization of Doob's optional sampling theorem. It is proved in Appendix A.
Lemma 5.2 Let  be a regular, conditional translation invariant, and recursive DMU functional, and let M be any -martingale. Then for every Z := (Zt)t{0,...,T }  H, each t  {0, ..., T }, and each stopping time   Tt, we have
t(Z ) = t(Z + MT - M ).

10

Remark 5.3 Under the assumptions of Lemma 5.2 the statement
t(Z ) = t(Z + M ) - Mt,
that one might expect at a first glance, does not hold.
The Doob type Lemmas 5.1,5.2, and the Bellman principle Theorem 3.4, provide the ingredients to establish the following additive dual representation.
Theorem 5.4 Let  be a regular, conditional translation invariant, and recursive DMU functional, and M0 be the set of all -martingales M with M0 = 0. For Z := (Zt)t{0,...,T }  H let M   M0 be the -martingale of the decomposition of Y  in (2) according to Lemma 5.1. Then

Yt

=

ess sup t(Z ) = ess inf t

 Tt

M M0

max (Zj - Mj + MT )
tjT

=

t

max (Zj
tjT

-

Mj

+

MT )

for t  {0, ..., T }.

Proof: Let A := (At)t{0,...,T } denote the predictable part of the decomposition of Y  according to Lemma 5.1. Since M  is a -martingale, we have for t  {0, ..., T }

0 = t(Mt+1) - Mt (C=3) t(Mt+1 - Mt) (C=3) t(Yt+1) - Yt - At+1 - At .
This implies At+1 - At = t(Yt+1) - Yt  0 due to the Bellman principle. Hence A has nonincreasing paths. Furthermore, by the Bellman principle t(Zt) = Zt  Yt holds for every t  {0, ..., T }. We thus have
Zt - Mt + MT = Zt + YT - Yt + At - AT  YT + At - AT for t  {0, ....T }.
Since A is nonincreasing,  is conditional translation invariant and recursive, and M  is a -martingale, it follows that

t

max (Zj
tjT

-

Mj

+

MT )

(C3)


t

(YT

-

AT )

+

At

(C=3)

Y0

+

t(MT )

+

At

=

Y0

+

Mt

+

At

=

Yt

(8)

for t  {0, ..., T }. Finally, using Lemma 5.2 and (8) we have for any t  {0, ..., T } and M  M0,

Yt = ess sup t(Z + MT - M )
 Tt



ess inf t
M M0

max (Zj - Mj + MT )
tjT



t

max (Zj
tjT

-

Mj

+

MT )

 Yt.

Example 5.5 Let Q denote the set of equivalent martingale measures w.r.t. some arbitrage-free financial market, and let Z := (Zt)t{0,...,T } be a nonnegative adaptive process satisfying sup sup EQ[Zt] < .
t{0,...,T } QQ
The process Z may be viewed as a discounted American Option. Then both the DMU functional 
11

defined

by

t(∑)

:=

ess sup
QQ

EQ[∑

|

Ft]

and

its

conjugate

t(∑)

=

ess inf
QQ

EQ[∑

|

Ft],

t



{0,

...,

T

},

are

regular,

translation invariant, and recursive. Let us further denote by X0 the set of X  L1(, FT , Q) which
QQ

satisfy sup EQ[X] = 0. Then by Theorem 5.4 the superhedging price and the lowest arbitrage-free price
QQ

of Z may be represented by

inf 0 max (Zt - t(X) + X)

X X0

t{0,...,T }

respectively.

and inf 0 max (Zt - t(X) + X) ,

X X0

t{0,...,T }

Examples 5.6 Theorem 5.4 may be applied immediately to the following regular, translation invariant, and recursive functionals (see also Remark 2.1).
1. Let  be a family of g-expectations as in Example 2.5 with driver g :  ◊ [0, S] ◊ R ◊ Rd  R such that g(, s, ∑, z) is constant for (, s, z)   ◊ [0, S] ◊ Rd.
2. The DMU functional  recursively defined as in Examples 2.6, 2..

6 Multiplicative dual upper bounds

The additive dual representation for the standard stopping problem has a multiplicative version which is due to [20]. We will develop in this section a multiplicative dual representation for the stopping problem (2) when the DMU functional  is recursive and positively homogeneous. Note that from any positively homogeneous recursively generated DMU functional we may obtain a recursive one, by multiplication with a constant. To our aim we need an extension of the multiplicative Doob decomposition theorem. As we do not want to burden the presentation with too much technicalities, we restrict our selves in this section to the case where X = L(, F , P).

Lemma 6.1 Let  := (t)t{0,...,T } be a positively homogeneous recursive DMU functional. Let  > 0, and Z := (Zt)t{0,...,T }  H with Zt   P -a.s. for any t  {0, ..., T }. Then there exists a unique pair (N, U )  H ◊ H of some -martingale N and a predictable process U such that N0 = U0 = 1 and

Zt = Z0NtUt P a.s.

for t  {0, ..., T }.

Proof: Define processes U and N recursively by U0 := N0 := 1 and

Ut+1 := Ut

t(Zt+1) , Zt

Nt+1

:= Nt

Zt+1 t(Zt+1)

for

t  {0, ..., T

- 1}.

Observe that U and N are well defined since by assumption t(Zt)  t() =  due to monotonicity of . Obviously, U is predictable, N is a -martingale, and it follows easily by induction that Zt = Z0NtUt for all t  {0, ..., T }.
Now let (N , U )  H ◊ H be another pair as stated. We will show that Nt = Nt, Ut = Ut P -a.s. for t  {0, ..., T } by induction. The case t = 0 is trivial. So let t  {0, ..., T - 1} such that Nt = Nt, Ut =

12

Ut P -a.s.. Firstly, t(Nt+1) = Nt = Nt = t(Nt+1) P -a.s. since N, N are -martingales. Therefore by conditional positive homogeneity (C6)

(C 6)

(C6)

Z0Ut+1Nt = Z0Ut+1t(Nt+1) = t(Zt+1) = Z0Ut+1t(Nt+1) = Z0Ut+1Nt.

Thus Ut+1 = Ut+1 P -a.s. due to Z0Nt > 0 P -a.s., and

Z0Ut+1Nt+1 = Zt+1 = Z0Ut+1Nt+1 = Z0Ut+1Nt+1 P -a.s..

Since Z0Ut+1 > 0 P -a.s. we have Nt+1 = Nt+1 P -a.s.

The next Lemma is a multiplicative version of Lemma 5.2. For a proof see Appendix A.

Lemma 6.2 Let  := (t)t{0,...,T } be a positively homogeneous recursive DMU functional, and let Z := (Zt)t{0,...,T }  H with Zt  0 P -a.s. for any t  {0, ..., T }. If N := (Nt)t{0,...,T } denotes any -martingale satisfying Nt > 0 P -a.s., then

t(Z ) = t

Z NT N

for t  {0, ..., T } and   Tt.

Obviously, under the assumptions of this section  satisfies the Bellman principle (see Theorem 3.4), which allows us to establish a multiplicative dual representation for the stopping problem (2).

Theorem 6.3 Let the DMU functional  be as in Lemma 6.1, let M+1 be the set of all -martingales N with N > 0 and N0 = 1, and let Z  H with Z  0. We then may state for every t  {0, ..., T } the
following:

(i)

Yt

=

ess sup t(Z )
 Tt



inf
N M+1

t

max ZjNT tjT Nj

.

(ii) If  satisfies in addition condition (C7), we have

Yt

=

ess inf
N M+1

t

max ZjNT tjT Nj

.

(iii) If Z is as in Lemma 6.1 we have

Yt

=

ess inf t
N M+1

max
tjT

Zj NT Nj

= t

max
tjT

Zj NT Nj

,

where N   M0 is the -martingale in the multiplicative decomposition of Y  in (6.1).
Proof: Statement (i) is an immediate consequence of Lemma 6.2. For the proof of statement (ii) let us consider an arbitrary  > 0. The process Z, defined by Zt := Zt   induces the process Y  via Yt := ess sup t(Z) which fulfills the assumptions of Lemma 6.1. Therefore
 Tt

13

we may find a pair (U , N ) consisting of a predictable process U  and a -martingale N   M+1 satisfying
Yt = Y0NtUt P a.s. for t  {0, ..., T }.
Due to conditional positive homogeneity of , the predictability of U , and since N  is a -martingale we may conclude

1 = t

Nt+1 Nt

= t

Yt+1Ut YtUt+1

=

Ut Ut+1

t(Yt+1) Yt

for

t



{0, ..., T

- 1}.

In view of the Bellman principle this implies

Ut+1 Ut

=

t(Yt+1) Yt



1

for

t



{0, ..., T

- 1}.

Hence U  has nonincreasing paths. Furthermore Zt = t(Zt) and so in particular, Zt  Yt due to the Bellman principle. Combining, we obtain for t  {0, ..., T },

t

max
tjT

ZjNT Nj



t

max
tjT

YjNT Uj

= t

max
tjT

YTUj UT

 Utt

YT UT

= Utt (Y0NT) = UtY0t (NT) = Yt.

(9)

Now let a common function g satisfy (1) in condition (C7) for all Zj, j = 0, ..., T. By regularity and condition (C7) it then holds

TT

Yt := ess sup 1[=j]t(Z) = ess sup 1[=j]t(Zj)

 Tt j=t

 Tt j=t

T
 ess sup 1[=j] (t(Zj) + g()) = Yt + g().
 Tt j=t

Hence with (9) we obtain

Yt

+

g()



ess inf
N M+1

t

max ZjNT tjT Nj

(i)
 Yt for every t  {0, ..., T }.

The proof of (ii) is completed by sending   0. Now let Z and  > 0 be as in Lemma 6.1 and take  such that 0 <  < . We so have Z = Z and then statement (iii) follows from statement (i) and using (9) in the proof of (ii) (which holds independently of condition (C7)).

Examples 6.4 Theorem 6.3 may be applied in the following situations.
1. Let Q denote the set of equivalent martingale measures w.r.t. some arbitrage-free financial market, and let Z := (Zt)t{0,...,T } be a nonnegative adaptive process satisfying sup sup EQ[Zt] < .
t{0,...,T } QQ

14

The process Z may be viewed as a discounted American Option with respect to the recursive
conditional positive homogeneous DMU functional t(∑) := ess sup EQ[∑ | Ft]. Furthermore, let us
QQ
denote by X+1 the set of X  L(, FT , P) with X > 0 P -a.s. such that sup EQ[X] = 1. Then
QQ
the superhedging price and the lowest arbitrage-free price of Z may be represented by

inf 0
X X+1

max ZtX t{0,...,T } t(X )

and

inf 0
X X+1

max ZtX t{0,...,T } t(X )

,

respectively (see also Example 5.5).

2. As another application of Theorem 6.3 we may consider the DMU functionals in Examples 2.6, 2, since they are obviously recursive and positively homogeneous.

7 Consumption based representation

Throughout this section,  is a regular conditional translation invariant recursive DMU functional. For such a functional we will propose a representation for the stopping problem (2) which can be seen as generalization of the consumption upper bound in [4] and [5]. Due to the fact that  satisfies the Bellman principle we can proof the following theorem.

Theorem 7.1 For any Z  H we have


T -1



Yt := ess sup t(Z ) = t ZT + (Zj - j(Yj+1))+ ,

 Tt

j=t

t  {0, ..., T },

with empty sums being defined zero.

Proof: We shall proceed by backward induction over t. The case t = T is trivial. So let us assume for any
T -1
t  {1, ..., T } that Yt = t ZT + (Zj - j(Yj+1))+ is valid. Then due to Bellman principle Yt-1 =
j=t
(Zt-1 - t-1(Yt))+ + t-1 (Yt) , which implies by assumption and recursiveness property (C4)



T -1



Yt-1 = (Zt-1 - t-1(Yt))+ + t-1 t ZT + (Zj - j (Yj+1))+

j=t


T -1



= (Zt-1 - t-1(Yt))+ + t-1 ZT + (Zj - j (Yj+1))+

j=t

Then the application of conditional translation invariance yields


T -1
Yt-1 = t-1 (Zt-1 - t-1(Yt))+ + ZT + (Zj - j (Yj+1))+
j=t


T -1



= t-1 ZT +

(Zj - j (Yj+1))+ ,

j=t-1

15

which completes the proof. The interesting feature of the representation in Theorem 7.1 is that if we replace Y  on the right-hand-side by a lower (upper) approximation we obtain an upper (lower) bound for Y  on the left-hand-side.
8 Numerical approaches for optimal stopping of some specific DMU functionals
In this section we sketch how the different representations developed in Sections 4-7 may be utilized for constructing (upper and/or lower) approximations of the of the optimal value of stopping problem (2). In order to enable a feasible algorithm or simulation procedure for optimal stopping of a particular DMU functional we naturally presume that we have a feasible algorithm or simulation procedure for the functional itself at hand. In this respect we underline that numerical (simulation) methods for specific DMU functionals is an interesting issue in it's own right but considered to be beyond the scope of this article. Another natural assumption is that we have some underlying process with some kind of Markovian structure which can be simulated straightforwardly. More specifically, we assume that we are in the following setting.
Setting for solving general optimal stopping problems by simulation
i) The filtration (Ft)t{0,...,T } is generated by some underlying stochastic process S := (St)t{0,...,T } in some multi-dimensional state space, e.g. Rd.
ii) The process Z := (Zt)t{0,...,T } under consideration satisfies Zt = h(t, St) for some known nonnegative measurable function h. For ease of exposition, h is assumed to be bounded.
iii) The DMU functional  = (t)t{0,...,T } is regular, recursively generated by (t)t{0,...,T } with generators satisfying t(X) = X if X  Ft, for any t  {0, ..., T }. Hence in particular  is recursive with t(X) = X of X  Ft for t  {0, ..., T }.
iv) For any t  {0, ..., T } we have t(X) being {St}-measurable if X is {St, ...ST }-measurable (We might think of S being Markovian w.r.t. the functional ). This condition is e.g. guaranteed in the case that for any u, t  {0, ..., T } with u  t we have t(X) is {Su, ..., St}-measurable whenever X is {Su, ..., St+1}-measurable.
v) For any t  {0, ..., T }, we may compute t(X)  {St} if X  {St, ...ST } by some kind of simulation method.
In the standard case, where  represents the ordinary conditional expectation and S is Markovian in the ordinary sense, iii), iv), and v) are obviously fulfilled. A canonical way of evaluating conditional expectations is (Monte Carlo) simulation from a particular state (t, St) (particularly in higher dimensions). In general there are many interesting examples, for instance, within the class of g-expectations:
Example 8.1 Let  be a family of g-expectations as in example 2.5 with Brownian motion B = (Bs)s0 and driver g : ◊[0, S]◊R◊Rn  R being of the form g(, s, y, z) := f (Ss, y, z). Here f : Rn ◊R◊Rd  R is any Lipschitz function with f (∑, 0)  0, and (Ss)s0 is an n-dimensional diffusion process with dynamics given by the SDE,
dSs = µ(Ss) dt + (Ss) dBs.
16

Under some further conditions of regularity for µ,  and f, it may be verified that  satisfies assumption iv) (cf. [18], Theorem 6.2). Furthermore simulation algorithms as required in assumption v) are already available (see e.g. [16], [27]). Moreover, if f does not depend on y, and is sublinear in z, then there is some set Q of probability measures which are absolutely continuous w.r.t. P such that  admits the following robust representation
t(X) = ess sup EQ [X | {S1, ..., St}] ,
QQ
where the essential supremum is attained (see [7], proof of Theorem 3.1).
Below we will outline the implementation of the above simulation setting for different solution representations proposed in Sections 4-7.

Policy iteration

The policy iteration method in Section 4 may be readily applied if the time consistent stopping family
(t) we start with is such that {t = t}  {St}. For example we just take the trivial family t = t, t  {0, ..., T }. Then the iteration procedure will be analogue to the one spelled out in [22]. In short, given an input stopping family (t), simulate a set of N (outer) trajectories S(n), n = 1, ..., N, from t = 0 to T. Determine on each outer trajectory S(n), the improved stopping time 0. For this, one needs to simulate for each time s = 0, 1, .. a set of M (inner) trajectories (mSu(n))u=s,...,T , m = 1, ..., M to check by simulation
whether the event

s(Zs)



max
s+1uT

s(Zu )

in (5) is true. If s(n) is the first time where (5) is valid, we put 0(n) = s(n) on trajectory n. Finally we compute 0(Zb0 ) from the sample Zb(0n), n = 1, ..., N.

Dual upper bounds
We consider the construction of an additive dual upper bound for a regular, recursive DMU functional, which is translation invariant. Let us assume that we are given a proxy Yt = U (t, St) of the Snell envelope Yt = U (t, St). Note that the Snell envelope is indeed of this form due to assumptions i), ii), and iv). For instance, for the DMU functional in Example 3.6, a proxy may be constructed by approximating the Snell envelope with respect to a more simple functional, replacing the representing set Q of probability measures by a smaller subset or even a singleton. Let M Y be the Doob -martingale of Y and consider the upper bound

Y0up

=

0

( max
0tT

Zt + MTY - MtY

)

T -1

= 0

max
0tT

h(t, St) +

[U (s + 1, Ss+1) - s (U (s + 1, Ss+1))]

s=t

.

Similar as in [1] we are going to construct an approximation of this upper bound by a nested simulation. We simulate N (outer) trajectories S(n), n = 1, ..., N, from t = 0 to T, and for each outer trajectory n, and time s, s < T, a set of M (inner) two step trajectories (mSu(n))u=s,s+1, m = 1, ..., M. On a fixed

17

outer trajectory S(n) we then construct for each s an approximation of (sn) (U (s + 1, Ss+1)) by the inner sample U (s + 1, 1Ss(n+)1), ..., U (s + 1, M Ss(n+)1), and next determine

T -1

(n) := max
0tT

h(t, St(n)) +

U (s + 1, Ss(n+)1) - (sn) (U (s + 1, Ss+1))

s=t

.

We thus end up with the sample (1), ..., (N) of the random variable  := max
0tT

Zt + MTY - MtY

, from

which finally Y0up = 0() may be estimated.

Multiplicative and consumption upper bounds
From the simulation methods sketched above it will be clear in principle how to construct a multiplicative upper bound for a positively homogeneous DMU functional, and how to construct an upper (lower) bound due to the consumption representation in Theorem 7.1 for a translation invariant functional when a lower (upper) bound of the Snell envelope is given.

Concluding remark
In this article different representations for the optimal stopping problem with respect to general DMU functionals are presented. It is shown that these representations allow for a numerical treatment of the generalized stopping problem. A detailed analysis of the numerical algorithms sketched in Section8, which will depend on particular properties of the functional under consideration, remains to be done in future work.

A Appendix

Proof of Theorem 4.1: The inequalities Yt  Yt and Yt  Yt are obvious for any t  {0, ..., T }. So inequality Yt  Yt is left to show. We shall use backward use induction.
Due to the definition of Y and Y , we have YT = YT = T (ZT ). Suppose that Yt  Yt holds for any
t  {1, ..., T }. We then have to show that Yt-1  Yt-1. For this we first show sequentially

(1) 1[^t-1=t-1]Yt-1 = 1[^t-1=t-1]t-1(Zt-1).

(2)

1[^t-1 >t-1] Yt-1



1[^t-1 >t-1]

max
tsT

t-1(Zs ).

(3) t-1(Zt-1 )  max

t-1(Zt-1),

max
tsT

t-1(Zs )

.

Due

to

the

definition

of

^t-1

we

have

on

the

set

{^t-1

=

t

-

1},

t-1(Zt-1)



max
tsT

t-1(Zs ),

and

on

the

set

{^t-1

>

t

-

1},

t-1(Zt-1)

<

max
tsT

t-1(Zs ).

Thus

we

may

conclude

immediately

from

(1)-(3)

Yt-1  max

t-1(Zt-1),

max
tsT

t-1(Zs )

 max

t-1(Zt-1 ),

max
tsT

t-1(Zs )

= Yt-1,

18

as required.
proof of (1): By regulation condition (C2) we may find sequentially

1[^t-1=t-1]Yt-1 = t-1(1[^t-1=t-1]Z^t-1 ) = t-1(1[^t-1=t-1]Zt-1) = 1[^t-1=t-1]t-1(Zt-1),
which proves (1).
proof of (2): 1 Z[^t-1>t-1] ^t-1 = 1[^t-1>t-1]Z^t due to time consistency of (^t)t{0,...,T }. Hence the regularity condition implies

1[^t-1>t-1]Yt-1 = t-1(1[^t-1>t-1]Z^t-1 ) = t-1(1[^t-1>t-1]Z^t ) = 1[^t-1>t-1]t-1(Z^t ) = 1[^t-1>t-1]t-1(Yt).

By the induction hypothesis we have Yt  Yt, so we may conclude by monotonicity of t-1,

1[^t-1 >t-1] Yt-1



1[^t-1>t-1]t-1(Yt)



1[^t-1 >t-1]

max
tsT

t-1(t(Zs ))

=

1[^t-1 >t-1]

max
tsT

t-1(Zs ).

Thus (2) is shown.
proof of (3): Using regularity condition (C2) we obtain

t-1(Zt-1 ) = 1[t-1=t-1]t-1(Zt-1 ) + 1[t-1>t-1]t-1(Zt-1 ) = t-1(1[t-1=t-1]Zt-1) + t-1(1[t-1>t-1]Zt-1 ).
1 Z[t-1>t-1] t-1 = 1[t-1>t-1]Zt due to time consistency of (t)t{0,...,T }. Hence the application of regularity again yields

t-1(Zt-1 ) = sdarticlet-1(1[t-1=t-1]Zt-1) + t-1(1[t-1>t-1]Zt ) = 1[t-1=t-1]t-1(Zt-1) + 1[t-1>t-1]t-1(Zt ),

obviously implying (3), and hence completing the proof.

Proof of Lemma 5.2:
We shall show the statement of Lemma 5.2 via backward induction. The case t = T is trivial since TT = {T }. So let us assume that for any t  {1, ..., T }, we have t(Z) = t(Z + MT - M) for every   Tt. Let us fix an arbitrary   Tt-1, and define ( ) := t1[=t-1] +  1[>t-1]  Tt. Then by assumption t(Z()) = t(Z() + MT - M()), which implies via regularity and recursiveness,

1[ >t-1]t-1(Z )

= = (C=2)

1[ >t-1]t(Z( )) = 1[ >t-1]t-1  t(Z( )) 1[ >t-1]t-1 t(Z( ) + MT - M( )) = 1[ >t-1]t-1(Z( ) + MT - M( ))
1[>t-1]t-1(Z + MT - M ).

19

Moreover, by regularity, conditional translation invariance, and the -martingale property of M we have,

1[=t-1]t-1(Z + MT - M )

(C2)
= (C=3) =

1[ =t-1]t-1(Zt-1 + MT - Mt-1)
1[=t-1] (Zt-1 - Mt-1 + t-1(MT )) 1[ =t-1]Zt-1 = 1[ =t-1]t-1(Zt-1).

which completes the proof.

Proof of Lemma 6.2:

We shall show the statement of the lemma by backward induction. The case t = T is trivial since

TT = {T }. Let us assume that for t  {1, ..., T } the equality t(Z ) = t

Z NT N

is valid for every

  Tt.

Consider an arbitrary   Tt-1, and define ( ) := 1=t-1t + 1>t  Tt. By the induction assumption

we have t

Z( )NT N( )

= t(Z()), so that regularity condition (C2) and recursiveness imply

1[ >t-1]t-1

Z NT N

(C=2)

1[ >t-1]t-1

Z( )NT N( )

= 1[ >t-1]t-1

t

Z( )NT N( )

= 1[ >t-1]t-1 t Z( ) = 1[ >t-1]t-1 Z( ) (C=2) 1[ >t-1]t-1 (Z ) .
Moreover, by regularity (C2), conditional positive homogeneity (C6), and the fact that N is a -martingale, it holds

1[ =t-1]t-1

Z NT N

(C=2) (C=6)

1[ =t-1]t-1

Zt-1NT Nt-1

1[

=t-1]

Zt-1 Nt-1

t-1

(NT

)

=

1[ =t-1]Zt-1

=

1[ =t-1]t-1(Z ).

References
[1] Andersen, L. and Broadie, M., A primal-dual simulation algorithm for pricing multidimensional American options, Management Sciences 50 (2004), 1222≠1234.
[2] Artzner, P., Delbaen, F., Eber, J.-M., Heath, D., Coherent measures of risk, Math. Finance 9 (1999), 203-228.
[3] Artzner, P., Delbaen, F., Eber, J.-M., Heath, D. and H. Hu, Coherent multiperiod risk adjusted values and Bellman's principle, Ann. Oper. Res. 152 (2007), 5-22.
[4] Belomestny, D., and G.N Milstein, Monte Carlo evaluation of American options using consumption processes, International Journal of Theoretical and Applied Finance 9 (2006), 1≠27.
20

[5] Belomestny, D., Milstein, G. N. and V. Spokoiny, Regression methods in pricing American and Bermudan options using consumption processes, Quant. Fin. 9 (2009), 315≠327.
[6] Broadie, M. and P. Glasserman, A stochastic mesh method for pricing high-dimensional American options, Journal of Computational Finance 7 (2004) , 35≠72.
[7] Chen, Z., Kulperger, R. and L. Jiang, Jensen's inequality for g-expectations, part 1, C. R. Academ. Sci. Paris I 337, 725-730.
[8] Cheridito, P., Delbaen, F. and M. Kupper, Dynamic monetary risk measures for bounded discretetime processes, Electronic Journal of Probability 11 (2006), 57-106.
[9] Cheridito, P., and M. Kupper, Recursiveness of indifference prices and translation invariant preferences, forthcoming in Mathematics and Financial Economics.
[10] Delbaen, F., The structure of m-stable sets and in particular of the set of risk neutral measures, In memoriam Paul-Andre Meyer: Seminaire de Probabilites XXXIX, 215-258, Lecture Notes in Math., 1874, Springer, Berlin, 2006.
[11] Detlefsen, K. and G. Scandolo, Conditional and dynamic convex risk measures, Finance and Stochastics 9 (2005), 539-561.
[12] El Karoui, N., Peng, S. and M. C. Quenez, Backward stochastic differential equations in finance, Math. Finance 7 (1997), 1-71.
[13] El Karoui, N. and C. Ravanelli, Cash-subadditive risk measures under interest rate ambiguity, forthcoming in Math. Finance.
[14] F®ollmer, H. and I. Penner, Convex risk meassures and the dynamics of their penalty functions, Statistics and Decision 24 (2006), 61-96.
[15] F®ollmer, H. and A. Schied, Stochastic Finance, de Gruyter, Berlin and New York, 2004 (2nd ed.).
[16] Gobet, E., Lemor, J. P. and X. Warin, Rate of convergence of an empirical regression method for solving generalized backward stochastic differential equations, Bernoulli 12 (2006), 889-916.
[17] Haugh, M. B., and L. Kogan, Pricing American Options: A Duality Approach, Operations Research 52 (2004), 258≠270.
[18] Hu, Y. and J. Ma, Nonlinear Feynman-Kac formula and discrete-functional-type BSDEs with continuous coefficients, Stochastic Processes and their Applications 112 (2004), 23-51.
[19] Jiang, L., Convexity, translation invariance and subadditivity for g-expectations and related risk measures, Ann. Appl. Prob. 18 (2008), 245-258.
[20] Jamshidian, F. (2007) The duality of optimal exercise and domineering claims: A Doob-Meyer decomposition approach to the Snell envelope, Stochastics 79 (2007), 27≠60.
[21] Klo®ppel, S. and M. Schweizer, Dynamic indifference valuation via convex risk measure, Math. Finance 17 (2007), 599-627.
21

[22] Kolodko, A. and J. Schoenmakers, Iterative construction of the optimal bermudan stopping time, Finance and Stochastics 10 (2006), 27-49.
[23] Kra®tschmer, V., On -additive robust representation of convex risk measures for unbounded financial positions in the presence of uncertainty about the market model, SFB 649 discussion paper 2007-010, downloadable at http://sfb649.wiwi.hu-berlin.de.
[24] Longstaff, F. A. and R. S. Schwartz, Valuing American Options by Simulation: A Simple Least-Square Approach, Review of Financial Studies 14 (2001), 113-147.
[25] Peng, S., Backward SDE and related g-expectations, in: El Karoui, N. and Mazliak, L. (eds.), Backward stochastic differential equations, Pitman Res. Notes Math. Ser. Vol. 364, Longman, Harlow, 1997, pp. 141-159.
[26] Peng, S., Modelling derivative pricing mechanism with their generating functions, arXiv:math/0605599v1.
[27] Pens, S. and M. Xu, Numerical Algorithms for Backward Stochastic Differential Equations: Convergence and Simulations, arXiv:math/0611864v4.
[28] Riedel, F., Optimal stopping with multiple priors, Econometrica 77 (2009), 857-908. [29] Rogers, L. C. G., Monte Carlo Valuation of American Options , Math. Finance 12 (2002), 271≠286. [30] Roorda, B., Schumacher, J. M. and J. Engwerda, Coherent acceptability measures in multiperiod
models, Math. Finance 15 (2005), 589≠612. [31] Roorda, B. and J. M. Schumacher, Time consistency conditions for acceptability measures, with an
application to Tail Value at Risk, Insurance Math. Econom. 40 (2007), 209≠230. [32] Tsitsiklis, J. and B. Van Roy, Regression methods for pricing complex American style options, IEEE
Trans. Neural. Net. 12 (2001), 694≠703. [33] Tutsch, S., Udate rules for convex risk measures, Quant. Fin. 8 (2008), 833≠843. [34] Weber, S., Distribution-invariant risk measures, information, and dynamic consistency, Math. Finance
16 (2006), 419≠441.
22

SFB 649 Discussion Paper Series 2009
For a complete list of Discussion Papers published by the SFB 649, please visit http://sfb649.wiwi.hu-berlin.de.
001 "Implied Market Price of Weather Risk" by Wolfgang H‰rdle and Brenda LÛpez Cabrera, January 2009.
002 "On the Systemic Nature of Weather Risk" by Guenther Filler, Martin Odening, Ostap Okhrin and Wei Xu, January 2009.
003 "Localized Realized Volatility Modelling" by Ying Chen, Wolfgang Karl H‰rdle and Uta Pigorsch, January 2009.
004 "New recipes for estimating default intensities" by Alexander Baranovski, Carsten von Lieres and AndrÈ Wilch, January 2009.
005 "Panel Cointegration Testing in the Presence of a Time Trend" by Bernd Droge and Deniz Dilan Karaman ÷rsal, January 2009.
006 "Regulatory Risk under Optimal Incentive Regulation" by Roland Strausz, January 2009.
007 "Combination of multivariate volatility forecasts" by Alessandra Amendola and Giuseppe Storti, January 2009.
008 "Mortality modeling: Lee-Carter and the macroeconomy" by Katja Hanewald, January 2009.
009 "Stochastic Population Forecast for Germany and its Consequence for the German Pension System" by Wolfgang H‰rdle and Alena Mysickova, February 2009.
010 "A Microeconomic Explanation of the EPK Paradox" by Wolfgang H‰rdle, Volker Kr‰tschmer and Rouslan Moro, February 2009.
011 "Defending Against Speculative Attacks" by Tijmen DaniÎls, Henk Jager and Franc Klaassen, February 2009.
012 "On the Existence of the Moments of the Asymptotic Trace Statistic" by Deniz Dilan Karaman ÷rsal and Bernd Droge, February 2009.
013 "CDO Pricing with Copulae" by Barbara Choros, Wolfgang H‰rdle and Ostap Okhrin, March 2009.
014 "Properties of Hierarchical Archimedean Copulas" by Ostap Okhrin, Yarema Okhrin and Wolfgang Schmid, March 2009.
015 "Stochastic Mortality, Macroeconomic Risks, and Life Insurer Solvency" by Katja Hanewald, Thomas Post and Helmut Gr¸ndl, March 2009.
016 "Men, Women, and the Ballot Woman Suffrage in the United States" by Sebastian Braun and Michael Kvasnicka, March 2009.
017 "The Importance of Two-Sided Heterogeneity for the Cyclicality of Labour Market Dynamics" by Ronald Bachmann and Peggy David, March 2009.
018 "Transparency through Financial Claims with Fingerprints ≠ A Free Market Mechanism for Preventing Mortgage Securitization Induced Financial Crises" by Helmut Gr¸ndl and Thomas Post, March 2009.
019 "A Joint Analysis of the KOSPI 200 Option and ODAX Option Markets Dynamics" by Ji Cao, Wolfgang H‰rdle and Julius Mungo, March 2009.
020 "Putting Up a Good Fight: The GalÌ-Monacelli Model versus `The Six Major Puzzles in International Macroeconomics'", by Stefan Ried, April 2009.
021 "Spectral estimation of the fractional order of a LÈvy process" by Denis Belomestny, April 2009.
022 "Individual Welfare Gains from Deferred Life-Annuities under Stochastic Lee-Carter Mortality" by Thomas Post, April 2009.
SFB 649, Spandauer Straﬂe 1, D-10178 Berlin http://sfb649.wiwi.hu-berlin.de
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

SFB 649 Discussion Paper Series 2009
For a complete list of Discussion Papers published by the SFB 649, please visit http://sfb649.wiwi.hu-berlin.de.
023 "Pricing Bermudan options using regression: optimal rates of convergence for lower estimates" by Denis Belomestny, April 2009.
024 "Incorporating the Dynamics of Leverage into Default Prediction" by Gunter Lˆffler and Alina Maurer, April 2009.
025 "Measuring the effects of geographical distance on stock market correlation" by Stefanie Eckel, Gunter Lˆffler, Alina Maurer and Volker Schmidt, April 2009.
026 "Regression methods for stochastic control problems and their convergence analysis" by Denis Belomestny, Anastasia Kolodko and John Schoenmakers, May 2009.
027 "Unionisation Structures, Productivity, and Firm Performance" by Sebastian Braun, May 2009.
028 "Optimal Smoothing for a Computationally and Statistically Efficient Single Index Estimator" by Yingcun Xia, Wolfgang H‰rdle and Oliver Linton, May 2009.
029 "Controllability and Persistence of Money Market Rates along the Yield Curve: Evidence from the Euro Area" by Ulrike Busch and Dieter Nautz, May 2009.
030 "Non-constant Hazard Function and Inflation Dynamics" by Fang Yao, May 2009.
031 "De copulis non est disputandum - Copulae: An Overview" by Wolfgang H‰rdle and Ostap Okhrin, May 2009.
032 "Weather-based estimation of wildfire risk" by Joanne Ho and Martin Odening, June 2009.
033 "TFP Growth in Old and New Europe" by Michael C. Burda and Battista Severgnini, June 2009.
034 "How does entry regulation influence entry into self-employment and occupational mobility?" by Susanne Prantl and Alexandra Spitz-Oener, June 2009.
035 "Trade-Off Between Consumption Growth and Inequality: Theory and Evidence for Germany" by Runli Xie, June 2009.
036 "Inflation and Growth: New Evidence From a Dynamic Panel Threshold Analysis" by Stephanie Kremer, Alexander Bick and Dieter Nautz, July 2009.
037 "The Impact of the European Monetary Union on Inflation Persistence in the Euro Area" by Barbara Meller and Dieter Nautz, July 2009.
038 "CDO and HAC" by Barbara Choro, Wolfgang H‰rdle and Ostap Okhrin, July 2009.
039 "Regulation and Investment in Network Industries: Evidence from European Telecoms" by Michal Grajek and Lars-Hendrik Rˆller, July 2009.
040 "The Political Economy of Regulatory Risk" by Roland Strausz, August 2009.
041 "Shape invariant modelling pricing kernels and risk aversion" by Maria Grith, Wolfgang H‰rdle and Juhyun Park, August 2009.
042 "The Cost of Tractability and the Calvo Pricing Assumption" by Fang Yao, September 2009.
SFB 649, Spandauer Straﬂe 1, D-10178 Berlin http://sfb649.wiwi.hu-berlin.de
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

SFB 649 Discussion Paper Series 2009
For a complete list of Discussion Papers published by the SFB 649, please visit http://sfb649.wiwi.hu-berlin.de.
043 "Evidence on Unemployment, Market Work and Household Production" by Michael C. Burda and Daniel S. Hamermesh, September 2009.
044 "Modelling and Forecasting Liquidity Supply Using Semiparametric Factor Dynamics" by Wolfgang Karl H‰rdle, Nikolaus Hautsch and Andrija Mihoci, September 2009.
045 "Quantifizierbarkeit von Risiken auf Finanzm‰rkten" by Wolfgang Karl H‰rdle and Christian Wolfgang Friedrich Kirchner, October 2009.
046 "Pricing of Asian temperature risk" by Fred Benth, Wolfgang Karl H‰rdle and Brenda LÛpez Cabrera, October 2009.
047 "MM-Stat ≠ MultiMedia-Statistik: Statistische Datenanalyse ≠ webbasiert, interaktiv und multimedial" by Sigbert Klinke, Dina Kuhlee, Christian Theel, Cornelia Wagner and Christian Westermeier, October 2009.
048 "Migration of the Highly Skilled: Can Europe catch up with the US?" by Lydia Mechtenberg and Roland Strausz, October 2009.
049 "A blocking and regularization approach to high dimensional realized covariance estimation" by Nikolaus Hautsch, Lada M. Kyj and Roel C.A. Oomen, October 2009.
050 "Generalized single-index models: The EFM approach" by Xia Cui, Wolfgang Karl H‰rdle and Lixing Zhu, October 2009.
051 "The Market Impact of a Limit Order" by Nikolaus Hautsch and Ruihong Huang, October 2009.
052 "On economic evaluation of directional forecasts" by Oliver Blaskowitz and Helmut Herwartz, October 2009.
053 "Monetary Policy Implementation and Overnight Rate Persistence" by Dieter Nautz and Jan Scheithauer, November 2009.
054 "Depression Econometrics: A FAVAR Model of Monetary Policy During the Great Depression" by Pooyan Amir Ahmadi and Albrecht Ritschl, November 2009.
055 "Representations for optimal stopping under dynamic monetary utility functionals" by Volker Kr‰tschmer and John Schoenmakers, November 2009.
SFB 649, Spandauer Straﬂe 1, D-10178 Berlin http://sfb649.wiwi.hu-berlin.de
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

