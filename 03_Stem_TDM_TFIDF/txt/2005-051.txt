BERLIN

SFB 6 4 9 E C O N O M I C R I S K

SFB 649 Discussion Paper 2005-051
Optimal Investments for Risk- and AmbiguityAverse Preferences: A Duality Approach
Alexander Schied*
* Technische Universität Berlin, Germany
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".
http://sfb649.wiwi.hu-berlin.de ISSN 1860-5664
SFB 649, Humboldt-Universität zu Berlin Spandauer Straße 1, D-10178 Berlin

Optimal investments for risk- and ambiguity-averse preferences: a duality approach
Alexander Schied
TU Berlin, Institut fu¨r Mathematik, MA 7-4 Strasse des 17. Juni 136 10623 Berlin, Germany
e-mail: schied@math.tu-berlin.de
September 26, 2005; this version: August 30, 2006

Abstract: Ambiguity, also called Knightian or model uncertainty, is a key feature in financial modeling. A recent paper by Maccheroni et al. (2004) characterizes investor preferences under aversion against both risk and ambiguity. Their result shows that these preferences can be numerically represented in terms of convex risk measures. In this paper we study the corresponding problem of optimal investment over a given time horizon, using a duality approach and building upon the results by Kramkov and Schachermayer (1999, 2001).
Key words: Model uncertainty, ambiguity, convex risk measures, optimal investments, duality theory

1 Introduction

In the vast majority of the literature on optimal investments in financial markets it is assumed that decisions are based on a classical expected utility criterion in the sense of John von Neumann and Oscar Morgenstern. Underlying this concept is the assumption that expected utility is computed in terms of a probability measure that accurately models future stock price evolutions. In reality, however, the choice of this probability measure is itself subject to model uncertainty, often also called ambiguity or Knightian uncertainty. Economists have long been aware of this fact, and in the late 1980's Gilboa and Schmeidler [36, 20] formulated axioms on investor preferences that should account for aversion against both risk and ambiguity. They showed that these preferences can be numerically represented by a `coherent' robust utility functional of the form

X - inf EQ[ U (X) ], QQ
Supported by Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

(1)

1

2

where U is a utility function and Q is a class of probability measures; see also [18, Section 2.5] for a survey. The elements of Q can be interpreted as prior models, which possibly describe the probabilities of future scenarios. Taking the infimum of all expected utilities for these prior models thus corresponds to a worst-case approach. Systematic analyses of optimal investment decisions under this type of preferences were given, among others, by Talay and Zheng [38], Quenez [30], the author [32, 33], Burgert and Ru¨schendorf [5], Wu and the author [35], Fo¨llmer and Gundel [15], Mu¨ller [29], and Herna´ndez-Hern´andez and the author [22].
One might object that robust utility functionals of the form (1) leave no room for discriminating models in Q according to their plausibility. If, for instance, the class of prior models arises as a confidence set in statistical estimation, then the original estimate might have a higher plausibility, and thus should receive a higher weight, than a model at the boundary of the confidence set. Or one might wish to include the results of certain stress test models when their outcomes differ significantly from the ones of plausible priors; see, e.g., Carr et al. [6] and [18, Section 4.8]. These objections to robust utility functionals of the form (1) correspond to objections that can be raised on an axiomatic level against the axiom of `certainty independence' introduced in [20]. By weakening this axiom, Maccheroni et al. [27] recently obtained a numerical representation of the form

X - inf EQ[ U (X) ] + (Q) , Q

(2)

where the function  assigns a penalization weight (Q) to each possible probabilistic model Q. This class of robust utility functionals clearly extends the class (1) and leaves room for a discrimination among possible prior models. The move from (1) to (2) is similar to the generalization of coherent by convex risk measures [16, 17, 18, 19].
Our goal in this paper is to study the problem of constructing dynamic investment strategies whose terminal wealth maximizes a functional (2) for a given initial investment. More precisely, we will build on the results by Kramkov and Schachermayer [25, 26] and develop the duality theory for the maximization of the robust utility in a very general setting and under rather weak assumptions. Our main results are a minimax identity stating that the maximization over strategies and the minimization over measures can be interchanged, an analysis of the duality relations between the primal and the dual problems, and an existence and uniqueness result for optimal strategies based on a characterization of the optimal terminal wealth. The duality theory for `coherent' robust utility functionals of the form (1) was first developed in [30] and later extended in [35]. Our results given here are stronger than the ones in [35] even when restricted to the `coherent' case. In particular, we discuss the structure of the set of all solutions to the dual (and hence the primal) problem and prove the existence of a unique solution that satisfies a natural property of maximality. This discussion requires us to work with a setup of the dual problem, which is somewhat different from the one introduced in [35]. We also discuss in detail what happens if even the maximal solution does not have full support.
In many situations, the dual problem is simpler than the primal one, and so it can be advantageous to apply some kind of control approach to the dual rather than to the

3

primal problem. This is already true for the maximization of classical von NeumannMorgenstern utility, but in robust utility maximization there is the additional advantage that the dual problem simply involves the minimization of a convex functional while the primal problem requires to find a saddlepoint of a functional, which is concave in one argument and convex in the other. In the case of `coherent' robust utility maximization, [30] combines duality techniques with a control approach based on backward stochastic differential equations, while in [22] a Hamilton-Jacobi-Bellman partial differential equation (PDE) is derived for the dual problem. Based on the duality results given in (an earlier version of) this paper, Herna´ndez-Hern´andez and the author [23] recently obtained an explicit PDE characterization of the optimal strategy in an incomplete diffusion market model where the robust utility functional is defined in terms of a logarithmic utility function and a rather general dynamically consistent penalty function (·). This penalty function is described in Example 3.4.
Another feature of the duality method is that it works in a much more general setting than control techniques. The latter approach requires in particular the dynamic consistency of the underlying convex risk measure
(Y ) := sup EQ[ -Y ] - (Q)
Q
in the sense described, e.g., by Epstein and Schneider [14] for coherent risk measures and by Cheridito et al. [7] for the general case. This requirement of dynamic consistency rules out many examples, for which the dual approach makes perfect sense; see the discussion in Section 3 and in particular Remark 3.5. See also [32] for the explicit computation of optimal strategies in `coherent' examples, which are not dynamically consistent.
In Section 2 we formulate our hypotheses and state our main results. As in standard expected utility maximization, we observe that the duality for the value functions of the robust problem holds under rather mild conditions, while a stronger condition is necessary to guarantee the existence of optimal strategies. In Section 3 we present possible choices for penalty functions (·). We also give examples showing that the value function of the robust problem may not be continuously differentiable. Equivalently, the dual value function may not be strictly convex. We also illustrate that the maximal solution of the dual problem may fail to have full support. Proofs are given in Section 4.

2 Statement of main results

As Kramkov and Schachermayer [25, 26], we assume that the utility function of the investor is a strictly increasing and strictly concave function U : (0, )  R, which also is continuously differentiable and satisfies the Inada conditions

U (0+) = + and U (-) = 0.

Payoffs are modeled as random variables X on a given probability space (, F, P). Their utility shall be assessed in terms of a robust utility functional of the form

X - inf EQ[ U (X) ] + (Q) . Q

(3)

4

Here we assume that  is bounded from below and equal to the minimal penalty function of the convex risk measure  defined by

(Y ) := sup EQ[ -Y ] - (Q) ,
QP
That is,  satisfies the biduality relation

Y  L(P).

(Q) = sup EQ[ -Y ] - (Y ) ;
Y L(P)

(4)

see [16, 18]. We may assume without loss of generality that  is normalized in the sense that (0) = - infQ (Q) = 0. We also assume the following conditions:

Assumption 2.1 The risk measure  is continuous from below: If Yn  L increases a.s. to Y  L, then (Yn)  (Y ). It is also sensitive1 in the sense that every nonzero Y  L- satisfies (Y ) > 0.

In Section 3 we have collected a number of particular examples for economically and

statistically meaningful choices for . If  only takes the values 0 and +, then (3)

reduces to the representation of a robust utility functional in the sense of Gilboa and

Schmeidler [20]:

X - inf EQ[ U (X) ] QQ

(5)

for a convex set Q of probability measures. In this case, Assumption 2.1 is equivalent to

[35, Assumption 2.1], as can be seen by combining the general representation theory of

convex and coherent risk measures [18] with [35, Lemma 3.2] and Lemma 4.1 below. Even

when restricted to this special case, our results will be stronger than those obtained in

[35]. Particular examples for optimal investment problems with robust utility functionals

of type (5) were analyzed by Quenez [30] and the author [32].

Remark 2.2 If the utility function U is not bounded from below, we must be careful in defining the expression infQ EQ[ U (X) ] + (Q) . First, it is clear that probabilistic models with an infinite penalty (Q) should not contribute to the value of the robust utility functional. We therefore restrict the infimum to models Q in the domain

Q := {Q P | (Q) < }

of . That is, we precise (3) by writing

X - inf EQ[ U (X) ] + (Q) . QQ

Second, we have to address the problem that the Q-expectation of U (X) might not be welldefined in the sense that EQ[ U +(X) ] and EQ[ U -(X) ] are both infinite. This problem will be resolved by extending the expectation operator EQ[ · ] to the entire set L0:

EQ[ F ] := sup EQ[ F  n ] = lim EQ[ F  n ] for arbitrary F  L0. n n

(6)

It is easy to see that in doing so we retain the concavity of the functional X  EQ[ U (X) ] and hence of the robust utility functional.

1Sensitivity is also called relevance.

5

For the financial market model, we use the same setup as Kramkov and Schachermayer [25, 26]. The discounted price process of d assets is modeled by a stochastic process S = (St)0tT . We assume that S is a d-dimensional semimartingale on (, F , (Ft)0tT , P). A self-financing trading strategy can be regarded as a pair (x, ), where x  R is the initial investment and  = (t)0tT is a d-dimensional predictable and S-integrable process. The value process X associated with (x, ) is given by X0 = x and

t
Xt = X0 + r dSr ,
0

0tT.

For x > 0 given, we denote by X (x) the set of all value processes X that satisfy X0  x and are admissible in the sense that Xt  0 for 0  t  T . We assume that our model is arbitrage-free in the sense that M = , where M denotes the set of measures equivalent to P under which each X  X (1) is a local martingale; see [25]. Thus, our main problem can be stated as follows:

Maximize inf EQ[ U (XT ) ] + (Q) among all X  X (x). QQ
Consequently, the value function of the robust problem is defined as

u(x) := sup inf EQ[ U (XT ) ] + (Q) . XX (x) QQ
One of our first results will be the minimax identity

u(x) = inf QQ

uQ(x) + (Q)

,

where

uQ(x) := sup EQ[ U (XT ) ].
XX (x)

The function uQ is the value function of the optimal investment problem for an investor with subjective measure Q  Q. Next, we define as usual the convex conjugate function

V of U by

V (y) := sup U (x) - xy ,
x>0

y > 0.

With this notation, it was stated in Theorem 3.1 of [25] that, for Q  P with finite value

function uQ,

uQ(x) = inf vQ(y) + xy y>0

and

where the dual value function vQ is given by

vQ(y) = sup(uQ(x) - xy),
x>0

(7)

vQ(y) = inf EQ[ V (YT ) ], Y YQ(y)

Q  Q,

and the space YQ(y) is defined as the set of all positive Q-supermartingales such that Y0 = y and XY is a Q-supermartingale for all X  X (1). We thus define the dual value function of the robust problem by

v(y) := inf vQ(y) + (Q) = inf inf EQ[ V (YT ) ] + (Q) .

QQ

QQ Y YQ(y)

6

Definition 2.3 Let y > 0 be such that v(y) < . A pair (Q, Y ) is a solution of the dual problem if Q  Q, Y  YQ(y), and v(y) = EQ[ V (YT ) ] + (Q).
Let us finally introduce the set Qe of measures in Q that are equivalent to P: Qe := {Q  Q | Q  P}.
Our assumptions on  guarantee that Qe is always nonempty; see Lemma 4.1.

Theorem 2.4 In addition to the above assumptions, let us assume that

uQ0(x) <  for some x > 0 and some Q0  Qe

and that

v(y) <  implies vQ1(y) <  for some Q1  Qe.

Then the robust value function u is concave, takes only finite values, and satisfies

(8) (9)

u(x) = sup inf XX (x) QQ

EQ[ U (XT ) ] + (Q)

= inf sup QQ XX (x)

EQ[ U (XT ) ] + (Q) .

Moreover, the two robust value functions u and v are conjugate to another:

u(x) = inf v(y) + xy y>0

and v(y) = sup u(x) - xy .
x>0

In particular, v is convex. The derivatives of u and v satisfy

(10)

u (0+) =  and v (-) = 0.

(11)

If furthermore v(y) < , then the dual problem admits a solution (Q, Y ) that is maximal in the sense that any other solution (Q, Y ) satisfies Q Q and YT = YT Q-a.s.

It is possible that the maximal Q is not equivalent to P; see Example 3.2 below. If this happens, then Q considered as a financial market model on its own may admit arbitrage opportunities. In this light, one also has to understand the conditions (8) and (9): They exclude the possibility that the value functions uQ and vQ are only finite for some degenerate model Q  Q, for which the duality relations (7) need not hold.
The situation simplifies considerably if we assume that all measures in Q are equivalent to P. In this case, condition (9) is always satisfied and (8) can be replaced by the assumption that u(x) <  for some x > 0. Moreover, the optimal Y is then P-almost surely unique. Despite this fact, however, and in contrast to the situation in [25, 26], it can happen that the dual value function v is not strictly convex--even if all measures in Q are equivalent to P. Equivalently, the value function u may fail to be continuously differentiable. This fact will be illustrated in Example 3.1 below. A sufficient condition for the strict convexity of v and the continuous differentiability of u is given in the next result. It applies in particular to entropic penalties (Example 3.3) and to penalty functions defined in terms of many other statistical distance functions (Example 3.8).

7

Proposition 2.5 Suppose that the assumptions of Theorem 2.4 are satisfied and  is strictly convex on Q. Then u is continuously differentiable and v is strictly convex on its domain.

Our next aim is to get existence results for optimal strategies. In the classical case Q = {P}, it was shown in [26] that a necessary and sufficient condition for the existence of optimal strategies at each initial capital is the finiteness of the dual value function vP. This condition translates as follows to our robust setting:

vQ(y) <  for all y > 0 and each Q  Qe.

(12)

Recall from [26, Note 2] that (12) holds as soon as uQ is finite for all Q  Qe and the asymptotic elasticity of the utility function U is strictly less than one:

xU (x)

AE(U ) = lim sup

< 1.

x U (x)

Theorem 2.6 In addition to the assumptions of Theorem 2.4, let us assume (12). Then both value functions u and v take only finite values and satisfy

u (-) = 0 and v (0+) = -.

(13)

The robust value function u is strictly concave, and the dual value function v is contin-

uously differentiable. Moreover, for any x > 0 there exist an optimal strategy X  X (x)

for the robust problem. If y > 0 is such that v (y) = -x and (Q, Y ) is a solution of the

dual problem, then

XT = I(YT ) Q-a.s.

(14)

for I := -V and (Q, X) is a saddlepoint for the robust problem:

u(x) = inf QQ

EQ[ U (XT ) ] + (Q)

= EQb[ U (XT ) ] + (Q) = uQb(x) + (Q).

Furthermore, XY Z is a martingale under P, where (Zt)0tT is the density process of Q with respect to P .

In the preceding theorem, let us take (Q, Y ) as a maximal solution of the dual problem as constructed in Theorem 2.4. Then the solution XT will be P-a.s. unique as soon as Q  P. This equivalence holds trivially if all measures in Q are equivalent to P. In the general case, however, Example 3.2 will show that Q need not be equivalent to P, so that (14) cannot guarantee the P-a.s. uniqueness of XT . Nevertheless, we can construct an optimal strategy from a given solution of the dual problem by superhedging an appropriate contingent claim H  0:

Corollary 2.7 Suppose the assumptions of Theorem 2.6 hold. Let (Q, Y ) be a solution of the dual problem at level y > 0 and consider the contingent claim

H

:=

I

(YT

)I {Zb>0}

,

8

where dQ = Z dP. Then x = -v (y) is the minimal initial investment x > 0 for which there exists some X  X (x ) such that XT  H P-a.s. If furthermore X  X (x) is such a strategy, then it is a solution for the robust utility maximization problem at initial capital x.

Remark 2.8 Instead of working with the terminal values of processes in the space YQ(y), it is sometimes more convenient to work with the densities of measures in the set M of equivalent local martingale measures. In fact, the dual value function satisfies

dP 

v(y) = inf inf P M QQe

EQ

V

y dQ

+ (Q) .

(15)

This identity follows from Lemma 4.4 below and the corresponding identity in [25, 26]. Since the infimum in (15) need not be attained, it is often not possible to represent the optimal solution XT in terms of the density of an equivalent martingale measure. Nevertheless, F¨ollmer and Gundel [15] recently observed that the elements of YQ(1) can be interpreted as density processes of `extended martingale measures'.

3 Examples and Counterexamples

The first example in this section illustrates that the value function u need not be continuously differentiable and its dual v need not be strictly convex, even if all measures in Q are mutually equivalent. The second example illustrates that the maximal solution of the dual problem, as constructed in Theorem 2.4, may not have full support. The subsequent examples provide explicit choices for penalty functions , which are natural from an economical or statistical point of view. They will also illustrate that control methods are often not feasible for robust optimization problems.

Example 3.1 (Non-differentiability of the value function) We consider a one-period trinomial model where the risky asset starts off at S0 = 1. At time t = 1, it can take the values 0, 1, and 2. Consequently, we let  := {-, 0, +} and define S1(±) := 1 ± 1 and S1(0) := 1. A probability measure Q on  is determined by p := Q[ {+}] and q := Q[ {-}]. This model fits into the semimartingale framework by taking St := 1 and Ft := {, } as long as t < 1 and F1 := (S1). It is arbitrage-free and satisfies the assumption M =  iff p and q are both strictly positive. An investment  in the risky asset made for an initial wealth x results in a terminal payoff X1 = x + (S1 - S0). Hence,  is admissible iff ||  x. Let us take U (x) = x. Then the Q-expected utility of an admissible investment  is given by
 EQ U (x + (S1 - S0)) = p x +  + (1 - p - q) x + q x - .

Optimizing over  yields that

 = x · p2 - q2 p2 + q2

9

is the unique optimal strategy for Q. Now we take 0 < a < b < 2/3 and define Q as the

set of all measures Qp for which q = p/2 and a  p  b. This set Q is parameterized by p and consists of mutually equivalent measures. For Qp  Q, the value function is given by

where  =

 uQp(x) = x(1 + p),  8/5 - 3/2 + 1/ 10 > 0. The penalty function

(Q) := (b - p) if Q = Qp  Q, + otherwise,

is convex and lower semicontinuous and thus satisfies our assumptions. By Theorem 2.4,

the robust value function is given by



u(x) = inf QQ

uQ(x) + (Q)

=

x + b +  inf p x - p . apb

 The infimum on the right equals b x - b for x < 1 and a x - a for x > 1. Hence, u is

not continuously differentiable at x = 1, and v cannot be strictly convex; see, e.g., [31,

Theorem V.26.3].

Example 3.2 (The maximal Q may fail to have full support) The fact that the measure Q associated with the maximal solution for the dual problem may not be equivalent to P can be deduced from [35, Example 2.5 and Theorem 2.6]. Here we give a more direct argument within the setting of [35, Example 2.5]. We consider a one-period model in discrete time (t = 0, 1) with two risky assets S1, S2 satisfying S01 = S02 = 1. Under the measure P := Q1, the first asset S11 has the distribution
Q1[ S11 = 2 ] =: q = 1 - Q1[ S11 = 0 ],
where 1/2 < q < 1. The second asset S12 has support {0, 1, . . . }, and finite expected value EQ1[ S12 ] > S02 = 1. We take P := Q1 as our reference measure. We introduce another measure Q0 P by requiring that
Q0[ S11 = 2 ] = Q0[ S11 = 0 ] = 1/2 and Q0[ S12 = 0 ] = 1.
We define (Q) = 0 if Q = Q := Q1 + (1 - )Q0 for some 0    1 and (Q) =  otherwise. Note that a trading strategy can only be admissible for P = Q1 if it does not contain short positions in the second asset, because S12 is unbounded. Hence, under Q0 any strategy X  X (1) is a supermartingale, and it follows that vQ0(y) = V (y). Under Q with  > 0, any long position in the first asset will be a submartingale, and so we must have vQ(y) > V (y). This shows that Q = Q0 and Y1 = yI{S12=0} is the unique solution of the dual problem. Moreover, one can easily show that X1  x is the unique solution of the primal problem; see [35, Example 2.5]. The constant y = I(x), however, does not belong to any of the spaces YQ(y) for  > 0. This illustrates that it is possible that the duality relation
XT = I(YT )

10

cannot be extended to a P-a.s. identity. Finally, note that Q0 considered as a market

model on its own has not the same admissible strategies as P, since short selling the

second asset is admissible in the model Q0. In fact, such short sales even create arbitrage

opportunities under Q0.



Example 3.3 (Entropic penalties) A popular choice for  is taking (a multiple of) the relative entropy with respect to P, which is defined as

H(Q|P) =

dQ dQ

dP

log

dP

dP

=

sup
Y L

EQ[ Y ] - log E[ eY ] ,

Q P;

see, e.g., [18, Sections 3.2 and 4.9]. Due to the classical duality formula

log E[ eX ] = sup EQ[ X ] - H(Q|P) ,
QQ

(16)

the

choice

(Q)

=

1 

H

(Q|P)

corresponds

to

the

utility

functional

inf
QQ

EQ[ U (XT ) ] + (Q)

=

-

1 

log

E

e-U (XT )

of the terminal wealth, which obviously satisfies Assumption 2.1. Its maximization is equivalent to the maximization of the ordinary expected utility E[ U (XT ) ], where U (x) = -e-U(x) is strictly concave, increasing, and satisfies the Inada conditions. Thus, robustness effects are only felt in intertemporal optimization problems; see Hansen and Sargent [21], Barrieu and El Karoui [2], or Bordigoni et al. [4]. For related problems see, e.g., El Karoui et al [13], Schroder and Skiadas [37], and the references therein.

The use of entropic penalties in intertemporal optimization problems is facilitated

by the dynamic consistency of the corresponding conditional risk measure t(X) :=

1 

log

E[

e-X

|

Ft

],

namely,

0(-t(Y )) = 0(Y ) for all Y  L.

(17)

This property of dynamic consistency corresponds to the Bellman principle in dynamic programming and is the essential ingredient for the application of control methods.

Example 3.4 (A class of dynamically consistent penalties) Suppose that the fil-

tration (Ft)0tT is generated by a d-dimensional standard Brownian motion W . Then

for every measure Q P there exists a d-dimensional predictable process  such that

T 0

|t|2 dt <  Q-a.s.

and dQ/dP = E(

0 t dWt)T

Q-a.s., where E(M )t = exp(Mt -

M

t)

denotes the stochastic exponential of a continuous semimartingale M . Let h : R  [0, ]

be a lower semicontinuous proper convex function and suppose that there are constants

1, 2 > 0 such that h(x)  1|x|2 - 2. Then the penalty functions

T

t(Q) := EQ

h(u) du Ft

t

define a dynamically consistent family (t)0tT of risk measures. Moreover, 0 is the

minimal penalty function of 0, and 0 satisfies Assumption 2.1; see [23, Lemma 4.1]. Note

that

the

case

h(x)

=

1 2

|x|2

corresponds

to

the

entropic

penalty

function

(Q)

=

H (Q|P).

11

Remark 3.5 Recently, the dynamic consistency (17) of risk measures has been the subject of intense study; see, e.g., [7], [12], and the references therein. As explained above, it is the crucial property needed for an application of control methods and thus greatly facilitates computations. As a normative economic postulate, however, it is debatable as it would require that the investor does not change the penalty function for the entire investment period [0, T ] (apart from the obvious Markovian-type updating). But financial models are typically not accurate, and each piece of freshly revealed information might require to adjust models and hence penalty functions. In reality, this fact is usually taken into account by a periodic model recalibration, resulting in ever changing model parameters and thus non-Markovian updating.

In addition to the argument in the preceding remark, the following examples will illustrate that some natural risk measures do not satisfy the property (17). These examples all belong to the class of law-invariant convex risk measures. The failure of dynamic consistency for law-invariant coherent risk measures has already been pointed out by Delbaen [10]. In [32] one can find number of explicit computations of optimal strategies for robust utility functionals defined in terms of coherent risk measures for which dynamic consistency (17) is not given. The method in [32], however, is confined to complete market models, whereas our duality results presented in Section 2 are available in the general case.

Example 3.6 (Shortfall risk) Let : R  R be convex, increasing, and nonconstant and take x in the interior of (R). The associated shortfall risk measure

(Y ) := inf m  R | E[ (-Y - m) ]  x , Y  L,

(18)

was introduced by F¨ollmer and the author in [16]. Assumption 2.1 is satisfied due to [18,

Proposition 4.104]. Using (16), one sees that the choice (y) = ey corresponds to the

entropic

penalty

(Q)

=

1 

H

(Q|P).

For

general

, the penalty function is given by

1

(Q) = inf >0 

x+E



dQ 

dP

= inf x + E >0

 -1 dQ dP

,

Q P, (19)

where  is the Fenchel-Legendre transform of ; see [16, Theorem 10] or [18, Theorem 4.106]. The risk measure  satisfies (0) = 0 if we take x = (0). It induces a dynamic risk measure t, 0  t  T , in a canonical way by replacing the expectation operator in (18) with a conditional expectation. It is easy to see that this dynamic risk measure is weakly dynamically consistent in the sense that

t(Y )  0 P-a.s.  0(Y )  0 and t(Y )  0 P-a.s.  0(Y )  0; (20)
see Weber [39]. This weak property, however, does not guarantee the validity of (17), as is illustrated by the following simple example.

Example 3.7 (Shortfall risk may not be dynamically consistent) As a loss function we take (y) = (y + )+, where 0 <  < 1/4. Let Y1, Y2 be two Bernoulli random variables such that P[ Yi = 0 ] = P[ Yi = 1 ] = 1/2, i = 1, 2. Suppose that Y1 is F1-measurable

12

and Y2 is independent of F1, while F0 is trivial. We let Y := -Y1Y2 and compute its risk under the dynamic shortfall risk measure arising from (18), which is normalized if we choose x = . A straightforward computation then shows that 0(Y ) = 1 - 3, while 1(Y ) = (1 - )Y1 and 0(-1(Y )) = 1 - 2. We believe that this failure of dynamic consistency for shortfall risk is the rule rather than the exception.

Note the the condition of weak dynamic consistency (20) is necessary for (17). Yet, Weber [39] showed that, under certain technical regularity conditions, shortfall risk is the only law-invariant risk measure such that the associated canonical dynamic risk measure is weakly dynamically consistent. Here is another natural choice for a law-invariant risk measure, which may not even satisfy (20).

Example 3.8 (Statistical distance functions) Let g : [0, )  R{+} be a lower semicontinuous convex function satisfying g(1) <  and the superlinear growth condition g(x)/x  + as x  . Associated to it is the g-divergence

dQ Ig(Q|P) := E g dP ,

Q P,

as introduced by Csiszar [8, 9]. The g-divergence Ig(Q|P) can be interpreted as a statistical

distance between the hypothetical model Q and the reference measure P, so that taking

(Q) := Ig(Q|P) is a natural choice for a penalty function. The particular choice g(x) =
x log x corresponds to the relative entropy Ig(Q|P) = H(Q|P). Taking g(x) = 0 for x  -1 and g(x) =  otherwise corresponds to the coherent risk measure Average Value

at Risk,

AVaR(Y ) = sup EQ[ -Y ] | dQ/dP  -1 ,

which is also called Expected Shortfall or Conditional Value at Risk. One easily sees that

AVaR does not satisfy the condition of weak dynamic consistency (20); see also [39]. In particular it does not satisfy (17). See [32, 33] for an analysis of optimal investment

problems for AVaR in complete market models.

For general g the penalty function (Q) = Ig(Q|P) corresponds to the convex risk

measure

(Y ) = sup EQ[ -Y ] - (Q) ,
QP

Y  L,

which satisfies Assumption 2.1 and will be normalized as soon as g(1) = 0. Indeed, the level sets {dQ/dP | Ig(Q|P)  c} are weakly compact in L1(P) due to the superlinear growth condition, and so continuity from below follows from [28, Lemma 2] together with

[18, Corollary 4.35]; see also [24, Theorem 2.4]. The convex risk measure  satisfies the

variational identity

(Y ) = sup
QP

EQ[ -Y ] - (Q)

= inf zR

E[ g(z - Y ) ] - z ,

Y  L,

(21)

where g(y) = supx>0(xy - g(x)). In the particular situation considered in this example, the identity (21) yields an alternative way for transforming the original maximin problem

13
of robust utility maximization into a simpler minimization problem; see also the arguments in [34, Theorem 2.14]. The formula (21) was obtained by Ben-Tal and Teboulle [3] for R-valued g. In the case of AVaR, we have g(y) = 0  y/ and hence recover [18, Lemma 4.46] as a special case of (21). Below we will give a proof, which works in the general case and is based on the results from F¨ollmer and the author [16, 18] quoted in Example 3.6.

Proof of (21): For  > 0 let g(x) := g(x/). Then (, x)  g(x) is convex due to (25) below. Let (Q) = Ig(Q|P) be the corresponding g-divergence. Then (, Q)  (Q) is a convex functional, and it follows easily that

h() := minQ P EQ[ Y ] + (Q) if  > 0, + otherwise,

is a lower semicontinuous convex function in  if Y  L is fixed. Our aim is to compute
h(1). The idea is to use the fact that (19) is the penalty function of the risk measure in (18) in order to identify the Fenchel-Legendre transform h of h. We only have to observe that := g satisfies the assumptions of Example 3.6 and that  = g = g so as to apply
(19):

f (x) := inf m  R | E[ g(-m - Y ) ]  x

dQ

= sup
QP

EQ[ -Y ] - inf >0

x + E g

dP

= - inf inf EQ[ Y ] + x + (Q) >0 Q P
= - inf x + h() = h(-x), >0

for all x in the interior of g(R), which coincides with the interior of dom f . Convexity
hence yields h(1) = h(1) = supx(x - f (-x)). The definition of f yields that x = -E[ g(-f (-x) - Y ) ]. Hence,

h(1) = sup - E[ g(-f (-x) - Y ) ] - f (-x) ,
xR
and the assertion follows by noting that the range of f contains all points to the left of Y -  - x0, where x0 is the lower bound all points in which the right-hand derivative of g is strictly positive.

4 Proofs
For c  0, let us introduce the sets Q(c) := {Q  Q | (Q)  c} and Qe(c) := {Q  Q(c) | Q  P}.

14

With Z(c), Z, Ze(c), and Ze, we will denote the corresponding sets of densities, e.g.,

Z := dQ Q  Q , dP

Ze(c) :=

dQ dP

Q  Qe(c)

.

In the sequel, we will identify measures Q  Q with their densities Z = dQ/dP, and we will also write (Z), uZ, vZ for (Q), uQ, and vQ, respectively. Due to (4), Z  (Z) is a convex and weakly lower semicontinuous functional on L1(P).

Lemma 4.1 For every c > 0, the level set Z(c) is weakly compact, and Ze(c) is nonempty. Moreover, Z  (Z) is lower semicontinuous with respect to P-a.s. convergence on Z(c).

Proof: The set Z(c) is weakly closed by the weak lower semicontinuity of  and uniformly integrable due to [18, Lemma 4.22]. Hence, Z(c) is weakly compact according to the Dunford-Pettis theorem. Next, for all c > 0 we have that P[ A ] > 0 implies Q[ A ] > 0 for some Q  Q(c). Indeed, the sensitivity of  gives

0 < (-cIA) = sup (cQ[ A ] - (Q)). QQ(c)
Hence, the assertion Ze(c) =  follows from the Halmos-Savage theorem. Finally, if Zn  Z P-a.s. and all Zn belong to some level set Z(c), then convergence also holds in L1(P), and the lower semicontinuity of  follows from (4).

We note next that the space YQ(y) can easily be related to Y(y) := YP(y):

Lemma 4.2 Let (Zt)0tT be the density process of Q P with respect to P. Then a process Y Q belongs to YQ(y) if and only if Y QZ  Y(y). In particular, we have

v(y) = inf inf ZZ Y Y(y)

E ZV

YT Z

+ (Z) .

(22)

Proof: Take 0  s < t  T . If Y Q  YQ(y) and X  X (1), then

XsYsQ



EQ[ XtYtQ | Fs ]

=

1 Zs

E[

XtYtQZt

|

Fs

]

P-a.s. on {Zs > 0}.

On {Zs = 0} we have P-a.s. Zt = 0 and hence E[ XtYtQZt | Fs ] = 0 = XsYsQZs. Combining these two facts shows that XY QZ is a P-supermartingale and hence that Y QZ  Y(y).
Conversely, suppose that Y := Y QZ  Y(y). Then we have Q-a.s. for each X  X (1)

EQ[ XtYtQ

| Fs

]

=

1 Zs E

XtYt | Fs



XsYs Zs

=

XsYsQ.

15

The formula (22) is more convenient than our original definition of v, as the infimum is now taken over two sets that are no longer related to another. As in [25, 26], we obtain "abstract versions" of our theorems if we replace the spaces X (x) and YQ(y) by the respective spaces

C(x) = g  L+0 (, FT , P) | 0  g  XT for some X  X (x) .

and DQ(y) = h  L+0 (, FT , Q) | 0  h  YT for some Y  YQ(y) .
Obviously, this substitution does not affect the values of our value functions, i.e., using our convention (6) we have uQ(x) = supgC(x) EQ[ U (g) ], vQ(y) = infhDQ(y) EQ[ V (h) ],

u(x) = sup inf gC(x) QQ

EQ[ U (g) ] + (Q)

,

and

h

v(y) = inf inf EQ[ V (h) ] + (Q) QQ hDQ(y)

= inf inf ZZ hD(y)

E ZV

Z

+ (Z) .

Moreover, any optimal g or h, if they exist, can be taken as the terminal value of some process X  X (x) or Y  YQ(y). Next, recall from [25] that for Q  P and x, y  0 given,

g  C(x) h  DQ(y)

 

g  0 and sup EQ[ hg ]  xy
hDQ(y)
h  0 and sup EQ[ hg ]  xy.
gC(x)

(23)

We point out that validity of this relation is not clear for Q  P, and this will create a few technical difficulties in the sequel.
Under the convention (6), g  EQ[ U (g) ] is a concave functional on C(x) for each Q  Q and all x > 0. Using the fact that

{ g + (1 - )g | g  C(x), g  C(x ) }  C(x + (1 - )x )

then yields the concavity of the value functions uQ and u. The concavity of uQ implies in turn that

uQ  + as soon as EQ[ U +(g) ] = + for some g  C(x);
x>0

(24)

see [35, Lemma 3.1]. A key observation for our future analysis is the convexity of the function (z, y) 
zV (y/z). In fact, one has

(z0 + (1 - )z1)V

y0 + (1 - )y1 z0 + (1 - )z1

< z0V

y0 z0

+ (1 - )z1V

y1 z1

(25)

as soon as y0/z0 = y1/z1 and 0 <  < 1; see Equation (21) in [35].

16

Lemma 4.3 If v(y) < , then there exist h  D(y) and Z  Z such that

v(y) = E[ ZV (h/Z) ] + (Z).
Moreover, Z =: dQ/dP and h can be chosen in such a way that h/Z coincides Q-a.s. with the terminal value of some Y  YQb(y) and such that (Q, Y ) is a solution of the dual problem, which is maximal in the sense of Theorem 2.4.

Proof: Let (Zn, hn)  Z ×D(y) be a sequence such that E[ ZnV (hn/Zn) ]+(Zn)  v(y). Jensen's inequality implies that

E[ ZV (h/Z) ]  V E h I{Z>0}  V (y) for all Z and h  D(y).

(26)

Hence we must have c := 1 + lim supn (Zn) < , and so we can assume without loss of generality that Zn  Z(c) for all n.
Applying twice the standard Komlos-type argument of Lemma A1.1 in [11], we obtain
a sequence

(Zn, hn)  conv{(Zn, hn), (Zn+1, hn+1), . . . }  Z(c) × D(y)

that converges P-a.s. to some (Z0, h0). From (23) we get h0  D(y). Lemma 4.1 implies Z0  Z(c). It was shown in the proof of [35, Lemma 3.7] that the function

Z(c) × D(y) (Z, h) - E ZV h/Z

(27)

is lower semicontinuous with respect to P-a.s. convergence. By the convexity of (x, z)  zV (x/z) and Lemma 4.1 we thus get

E[ Z0V (h0/Z0) ] + (Z0)  lim inf E[ ZnV (hn/Zn) ] + (Zn) = v(y). n
In this sense, the pair (h0, Z0) is optimal. Suppose (h1, Z1) is another optimal pair, and let ht := th1 + (1 - t)h0 and Zt :=
tZ1 + (1 - t)Z0 for 0  t  1. The convexity of (h, Z)  E[ ZV (h/Z) ] + (Z) implies that each pair (ht, Zt) is also optimal. If 0 < t < 1, then {Zt > 0} = {Z0 > 0}  {Z1 > 0}. Moreover, (25) shows that the ratio ht/Zt does not depend on t  (0, 1). Hence, there exists a random variable YT  0 and a sequence Z1, Z2, . . . such that the following hold:
(a) P[ Zn > 0 ] tends to the maximum P-probability for the support of any optimal Z;
(b) {Z1 > 0}  {Z2 > 0}  · · · ;
(c) for each n, we have hn := YT Zn  D(y), and the pair (hn, Zn) is optimal.
By using a Komlos-type argument, we may assume that the Zn converge P-a.s to some Z  Z. Then YT Z  D(y) by (23) and in turn YT  DQb(y) due to Lemma 4.2. Hence, we may assume that YT is the terminal value of some Y  YQb(y). As above, we then conclude EQb[ V (YT ) ] + (Q)  v(y), that is, (Q, Y ) is a solution of the dual problem. Clearly, (Q, Y ) is maximal.

17

Let Qf denote the set of Q  Q such that uQ(x) <  for some and hence all x > 0. Similarly we define Qef , Zf , and Zef . We will show next that in (22) the set Q can be replaced by the smaller sets Qe and Qef .
Lemma 4.4 For v(y) <  the dual value function of the robust problem satisfies

v(y) = inf vQ(y) + (Q) = inf vQ(y) + (Q) .

QQe

QQfe

Proof: As for the proof of the first identity, suppose Z0  Z\Ze and h0  D(y) are such that E[ Z0V (h0/Z0) ] < . Due to our assumption (9), we may choose Z1  Ze and h1  D(y) such that E[ Z1V (h1/Z1) ] < . Now let Zt := tZ1 + (1 - t)Z0  Ze and ht := th1 + (1 - t)h0 for 0 < t  1. Since the function t  E[ ZtV (ht/Zt) ] + (Zt) is convex and takes finite values, it is upper semicontinuous and we get vZ0(y) + (Z0)  lim supt0(vZt(y) + (Zt)). This proves the first identity. The second identity follows from the fact that for Q  P we have vQ   as soon as uQ  ; see the proof of [35, Lemma
3.5].

Remark 4.5 In the sequel, we will sometimes use variants of the upper semicontinuity argument in the preceding proof. For a convex set Z  Z and Z0, Z1  Z let Zt := tZ1 + (1 - t)Z0. If f : Z  R  {} is a convex functional and f (Zt) <  for 0 < t < 1, then t  f (Zt) is upper semicontinuous on [0, 1]. If f is moreover lower semicontinuous (e.g., with respect to P-a.s. convergence), then t  f (Zt) is even continuous on [0, 1]. Due to (4), this argument applies to Z := Z and f (Z) := (Z). It also works for Z := Zf
and f (Z) := uZ(x); see [35, Lemma 3.3].

Lemma 4.6 We have

u(x) = sup inf gC(x) QQ

EQ[ U (g) ] + (Q)

= inf QQ

uQ(x) + (Q)

= sup inf EQ[ U (g) ] + (Q) = inf uQ(x) + (Q) .

gC(x) QQe

QQe

Proof: Take   (0, 1) and let c := 1 + u(x + 1) - U ()  0 so that

u(x + )  sup inf EQ[ U ( + g) ] + (Q) = sup inf E[ ZU ( + g) ] + (Z) .

gC(x) QQ

gC(x) ZZ(c)

On the one hand, the function U (· + ) is bounded from below, and so Z  E[ ZU ( + g) ] is a weakly lower semicontinuous affine functional on Z(c). Furthermore, Z  (Z) is also weakly lower semicontinuous, and the set Z(c) is convex and weakly compact by Lemma 4.1. On the other hand, for each Z  Z(c), g  E[ ZU ( + g) ] is a concave functional defined on the convex set C(x). Thus, the conditions of the lopsided minimax theorem [1, Chapter 6, p. 295] are satisfied, and so

sup inf E[ ZU ( + g) ] + (Z) = inf sup E[ ZU ( + g) ] + (Z) .

gC(x) ZZ(c)

ZZ(c) gC(x)

18

Since this expression is bounded above by u(x + ) < c + U ()  0, we may replace Z(c) by Z. Hence, we arrive at

u(x + )  inf sup E[ ZU ( + g) ] + (Z)  inf sup E[ ZU (g) ] + (Z)

ZZ gC(x)

ZZ gC(x)

 sup inf E[ ZU (g) ] + (Q) = u(x). gC(x) ZZ

Sending   0 and using the continuity of u yields the first part of the lemma. We still have to show that Z may be replaced by Ze. To this end, let Z0  Zf \Ze.
By assumption (8) there also exists some Z1  Zef . Remark 4.5 then gives uZ0(x) = limt0 uZt(x), where Zt := (1 - t)Z0 + tZ1  Ze for 0 < t  1. Hence, using the first part of this proof,

u(x) = inf uZ(x) + (Z)  sup inf EQ[ U (g) ] + (Q)

Z Ze

gC(x) QQe

 sup inf EQ[ U (g) ] + (Q) = u(x). gC(x) QQ

Proof of Theorem 2.4: By Lemma 4.6, (7), and Lemma 4.4,

u(x) = inf uQ(x) + (Q) = inf uQ(x) + (Q)

QQe

QQef

= inf inf vQ(y) + (Q) + xy = inf v(y) + xy ,

QQfe y>0

y>0

which is the first identity in (10).
To prove the second one, we first observe that v is convex due to the convexity of (Z, h)  E[ ZV (h/Z) ] + (Z). Next we will prove that v is lower semicontinuous on [0, ) if we define v(0) := V (0) := limy0 V (y). This will then imply that v is the conjugate function of u according to standard biduality results; see, e.g., [18, Proposition A.6 (b)]. To this end, take a sequence yn > 0 converging to y  0. There is nothing to show if lim infn v(yn) = , so we may assume that supn v(yn) < . By Lemma 4.3 there are hn  D(yn) and Zn  Z such that v(yn) = E[ ZnV (hn/Zn) ] + (Zn). By (26) we have v(yn)  V (yn) + (Zn). Since  is bounded from below, we must necessarily have V (y) < . Moreover, all Zn must belong to some Z(c) for some finite constant c. As above, we can pass to a sequence of convex combinations, which converges P-a.s. to some (h, Z). Using again (23) and Lemma 4.1 yields (h, Z)  D(y)×Z(c), while convexity, lower semicontinuity of (27), and Lemma 4.1 give v(y)  E[ ZV (h/Z) ] + (Z)  lim infn v(yn).
The identities in (11) can be proved as in [25, Lemma 3.5].

Proof of Proposition 2.5: The strict convexity of v will imply the differentiability of u; see, e.g., [31, Theorem V.26.3]. So suppose by way of contradiction that 0 < y0 < y1 are such that v is finite and affine on [y0, y1]. By Lemma 4.3 there are Zi  Z and hi  D(yi)

19

such that v(yi) = E[ ZiV (hi/Zi) ] + (Zi). We let y := (y1 + y0)/2, h := (h1 + h0)/2 etc. Then h  D(y) due to (23). Hence, the affinity of v and (25) imply that

v(y) = v(y1) + v(y0) = 1 22

E[ Z1V (h1/Z1) ] + (Z1) + E[ Z0V (h0/Z0) ] + (Z0)

 E[ ZV (h/Z) ] + (Z)  v(y).

Hence, the strict convexity of  implies that P-a.s. Z0 = Z1. But then we must also h1 = h0 P-a.s. on {Zi > 0}, due to the strict convexity (25). Thus, we get v(y0) = v(y1). However, taking a strictly positive h  D(1) (e.g. the density of some P   M) we have h1 := h0 + (y1 - y0)h  D(y1) and h1 > h0 so that
v(y1)  E[ Z0V (h1/Z0) ] < E[ Z0V (h0/Z0) ] = v(y0) = v(y1),
which is the desired contradiction.

We turn now to the existence and characterization of optimal strategies.

Lemma 4.7 Under condition (12), for all x > 0 there exists some g  C(x) such that infQQ EQ[ U (g) ] + (Q) = u(x).

Proof: Due to our assumption (12) and [35, Lemma 3.5], we have Qef = Qe. In particular, we have EQ[ U +(g) ] <  for all Q  Qe and g  C(x) by (24), and so the expectations
EQ[ U (g) ] are defined in the standard way. Moreover,

uQ(x) - 0 x

as x  

for each Q  Qe; see [26, Note 1]. Hence it follows from the proof of [26, Eq. (25)] that the mapping C(x) g  EQ[ U (g) ] is upper semicontinuous with respect to P-almost-
sure convergence (note that the proof of Eq. (25) in [26] does not use the assumption that (gn) is a maximizing sequence). Hence, C(x) g  infQQe EQ[ U (g) ] + (Q) is also upper semicontinuous with respect to P-almost-sure convergence. Now let (gn) be a maximizing sequence in C(x). By the usual Komlos-type argument there is a sequence
gn  conv{gn, gn+1, . . . } converging P-a.s. to some g  0. We have g  C(x) due to (23). Moreover, the concavity of the functional g  infQQe EQ[ U (g) ] + (Q) implies that (gn) is again a maximizing sequence, while its upper semicontinuity yields that infQQe EQ[ U (g) ] + (Q)  u(x).
We note next that the set {Q  Q | EQ[ U -(g) ] = } must be empty, for otherwise it would have a nonvoid intersection with Qe. Hence, for Q  Q\Qe and Q0  Qe, EQ[ U (g) ] is the limit as t  1 of EQt[ U (g) ], where Qt := tQ + (1 - t)Q0  Qe. By Remark 4.5, we also have (Qt)  (Q). This shows that we have infQQ EQ[ U (g) ] + (Q)  u(x).

20

Proof of Theorem 2.6: The existence of an optimal strategy X follows from Lemma 4.7. The assertion that u (-) = 0 follows from the fact that u(x)/x  0 as x  ,
which is itself a consequence of assumption (12) and [26, Note 1]. The second identity in
(13) follows from the first and the duality relations between u and v.
Now let y > 0 be such that v(y) + xy = u(x). Such a y exists due to the fact that v (0+) = - and v (-) = 0. We take a solution (Q, Y ) to the dual problem at level
y and denote by Z the density process of Q with respect to P. By an abuse of notation, we will also write ZT = Z. Our next goal is to show that (Q, X) is a saddlepoint for the robust problem. To this end, take any Z1  Ze and let Zt := (1 - t)Z + tZ1  Ze for 0 < t  1.
We first claim that vZt(y)+(Zt)  v(y) as t  0. To prove this claim, let h, h1  D(y) be such that vZb(y) = E[ ZV (h/Z) ] and vZ1(y) = E[ Z1V (h1/Z1) ], and let ht := (1 - t)h + th1  D(y). By the convexity of (y, z)  zV (y/z) we have

v(y)  vZt(y) + (Zt)  E ZtV

ht Zt

+ (Zt)

 t vZ1(y) + (Z1) + (1 - t) vZb(y) + (Z) ,

and our claim follows, since the right-hand side tends to v(y) as t  0.
Next, due to the duality relations (7) between vZt and uZt, we have vZt(y) + xy  uZt(x). Moreover, as t  0, uZt(x) + (Zt) tends to uZb(x) + (Z) according to Remark 4.5. Thus, we obtain

u(x) = v(y) + xy = ltim0 (vZt(y) + xy + (Zt))  ltim0 (uZt(x) + (Zt)) = uZb(x) + (Z).

Thus, Lemma 4.6 implies that uZb(x) + (Z) = u(x). Now we can conclude that

u(x)

=

uZb(x)

+

 (Z )



E[

ZU (XT

)

]

+

 (Z )



inf
QQ

EQ[ U (XT ) ] + (Q)

= u(x),

which finishes the proof that (Q, X) is a saddlepoint. Next, we show that XT coincides Q-a.s. with I(YT ). We have 0  V (YT ) + XT YT -
U (XT ) Q-a.s. and
EQb[ V (YT ) + XT YT - U (XT ) ] = v(y) + E[ XT YT Z ] - u(x)  v(y) + xy - u(x) = 0,
where we have used (23) and the fact that the process Y Z belongs to Y(y) due to Lemma 4.2. Thus, 0 = V (YT ) + XT YT - U (XT ) and in turn XT = I(YT ) Q-a.s. We also get E[ XT YT Z ] = xy, and this implies that the process XY Z is a P-martingale.
We will show next that u is strictly concave. The continuous differentiability of v will then follow by general principles (e.g., [31, Theorem V.26.3]) and from the duality relations (10). Suppose by way of contradiction that u is not strictly concave. Since u is strictly increasing with u (0+) =  and u (-) = 0, there will be 0 < x0 < x1 and y > 0 such that v(y) + xiy = u(xi) for i = 0, 1. Let Xi  X (xi) be the corresponding optimal solutions, and let (Q, Y ) be a solution to the dual problem at level y. Then we have both XT0 = I(YT ) = XT1 Q-a.s. and EQb[ XT0 YT ] = x0y < x1y = EQb[ XT1 YT ], which is impossible.

21
Proof of Corollary 2.7: The existence of a superhedging strategy for H with initial capital x follows from Theorem 2.6. That is, we have H  C(x). Moreover, we have YT Z  D(y) by Lemma 4.2, and hence
sup E[ Hh ]  E[ HYT Z ] = xy,
hD(y)
where the equality on the right follows from Theorem 2.6. Hence, due to (23), H cannot belong to any set C(x ) with x < x.
References
[1] Aubin, J.-P., Ekeland, I. Applied nonlinear analysis. New York: John Wiley & Sons 1984
[2] Barrieu, P., El Karoui, N. Optimal Derivatives Design under Dynamic Risk Measures. In: Mathematics of finance, Contemp. Math., 351, Providence, RI: Amer. Math. Soc. 2004, pp. 13­25
[3] Ben-Tal, A., Teboulle, M. Penalty functions and duality in stochastic programming via -divergence functionals. Math. Oper. Research 12, 224-240 (1987)
[4] Bordigoni, G. Matoussi, A. Schweizer, M. A stochastic control approach to a robust utility maximization problem. To appear in Proceedings of Abel Symposium. Berlin Heidelberg New York: Springer. http://www.math.ethz.ch/mschweiz/ms publ ger.html
[5] Burgert, C., Ru¨schendorf, L. Optimal consumption strategies under model uncertainty. Stat. Dec. 23, 1-14 (2005)
[6] Carr, P., Geman, H., Madan, D., Pricing and hedging in incomplete markets. J. Financial Econom. 62, 131­167 (2001)
[7] Cheridito, P., Delbaen, F., Kupper, M. Dynamic monetary risk measures for bounded discrete-time processes. Electronic J. Probab. 11, 57-106 (2006)
[8] Csiszar, I. Eine informationstheoretische Ungleichung und ihre Anwendung auf den Beweis der Ergodizit¨at von Markoffschen Ketten. Magyar Tud. Akad. Mat. Kutat´o Int. Ko¨zl. 8, 85­108 (1963)
[9] Csiszar, I. On topological properties of f -divergences. Studia. Sci. Math. Hungarica 2, 329-339 (1967)
[10] Delbaen, F. The structure of m-stable sets and in particular of the set of riskneutral measures. In: Yor, M., E´mery, M. (eds.): In Memoriam Paul-Andr´e Meyer - S´eminaire de Probabilit´es XXXIX. Berlin Heidelberg New York: Springer 2006, pp. 215-258
[11] Delbaen, F., Schachermayer, W. A general version of the fundamental theorem of asset pricing. Math. Ann. 300, 463­520 (1994)
[12] Detlefsen, K., Scandolo, G. Conditional and dynamic convex risk measures. Finance and Stochastics 9, 539-561 (2005)
[13] El Karoui, N., Peng, S., Quenez, M.C. A dynamic maximum principle for the optimization of recursive utilities under constraints. Ann. Appl. Probab. 11, 664-693 (2001)

22

[14] Epstein, L., Schneider, M. Recursive multiple-priors. J. Economic Theory 113, 1-31 (2003)

[15] F¨ollmer, H., Gundel, A. Robust projections in the class
of martingale measures. To appear in Illinois J. Math. 50. http://www.math.hu-berlin.de/foellmer/publications anf.html

[16] Fo¨llmer, H., Schied, A., Convex measures of risk and trading constraints. Finance Stochast. 6, 429-447 (2002)

[17] F¨ollmer, H., Schied, A., Robust representation of convex measures of risk. In: Advances in Finance and Stochastics. Essays in Honour of Dieter Sondermann, Berlin Heidelberg New York: Springer 2002, pp. 39­56

[18] F¨ollmer, H., Schied, A. Stochastic Finance: An Introduction in Discrete Time (de
Gruyter Studies in Mathematics 27). Berlin: Walter de Gruyter 2002. Second revised and extended edition 2004

[19] Frittelli, M., Rosazza Gianin, E., Putting order in risk measures. J. Banking & Finance 26, 1473-1486 (2002)

[20] Gilboa, I., Schmeidler, D. Maxmin expected utility with non-unique prior. J. Math. Econ. 18, 141-153 (1989)

[21] Hansen, L., Sargent, T. Robust control and model uncertainty. American Economic Review 91, 60-66 (2001)

[22] Herna´ndez-Hern´andez D., Schied, A. Robust utility maximization in a stochastic factor model. Stat. Decisions 24, 109-125 (2006)

[23] Herna´ndez-Hern´andez D., Schied, A. A control approach to robust utility maximiza-
tion with logarithmic utility and time-consistent penalties. Preprint, TU Berlin 2006. http://www.math.tu-berlin.de/schied/publications.html

[24] Jouini, E., Schachermayer, W., Touzi N. Law invariant risk measures have the Fatou property. Preprint, Universit´e Paris Dauphine, 2005.
http://www.crest.fr/pageperso/touzi/touzi.htm

[25] Kramkov, D., Schachermayer, W. The asymptotic elasticity of utility functions and optimal investment in incomplete markets. Ann. Appl. Probab. 9, 904­950 (1999)

[26] Kramkov, D., Schachermayer, W. Necessary and sufficient conditions in the problem of optimal investment in incomplete markets. Ann. Appl. Probab. 13, 1504-1516 (2003)

[27] Maccheroni, F., Marinacci, M., Rustichini, A. Ambiguity aversion, malevolent nature, and the variational representation of preferences. Preprint 2004.
http://web.econ.unito.it/gma/fabio.htm

[28] Kr¨atschmer, V. Robust representation of convex risk measures by probability measures. Finance Stochast. 9, 597-608 (2005)

[29] Mu¨ller, M. Market completion and robust utility mization. PhD Thesis, Humboldt-Universit¨at zu Berlin
http://edoc.hu-berlin.de/docviews/abstract.php?id=26287

maxi2005.

[30] Quenez, M.-C. Optimal portfolio in a multiple-priors model. Seminar on Stochastic Analysis, Random Fields and Applications IV, Progr. Probab., 58, Basel: Birkha¨user 2004, pp. 291­321

23
[31] Rockafellar, R. T. Convex analysis (Princeton Mathematical Series 28) Princeton, NJ: Princeton University Press, 1970. Reprinted 1997.
[32] Schied, A. Optimal investments for robust utility functionals in complete market models. Math. Oper. Research. 30, 750-764 (2005)
[33] Schied, A. On the Neyman-Pearson problem for law-invariant risk measures and robust utility functionals. Ann. Appl. Probab. 14, 1398-1423 (2004)
[34] Schied, A. Risk measures and robust optimization problems. To appear in Stoch. Models. http://www.math.tu-berlin.de/schied/publications.html
[35] Schied, A., Wu, C.-T. Duality theory for optimal investments under model uncertainty. Stat. Decisions 23, 199-217 (2005)
[36] Schmeidler, D. Subjective probability and expected utility without additivity. Econometrica 57, 571-587 (1989)
[37] Schroder, M., Skiadas, C. Optimal lifetime consumption-portfolio strategies under trading constraints and generalized recursive preferences. Stoch. Proc. Appl. 108, 155-202 (2003)
[38] Talay, D., Zheng, Z. Worst case model risk management. Finance Stochast. 6, 517-537 (2002)
[39] Weber, S. Distribution-invariant risk measures, information, and dynamic consistency. Math. Finance 16, 419-442 (2006)

SFB 649 Discussion Paper Series
For a complete list of Discussion Papers published by the SFB 649, please visit http://sfb649.wiwi.hu-berlin.de.
001 "Nonparametric Risk Management with Generalized Hyperbolic Distributions" by Ying Chen, Wolfgang Härdle and Seok-Oh Jeong, January 2005.
002 "Selecting Comparables for the Valuation of the European Firms" by Ingolf Dittmann and Christian Weiner, February 2005.
003 "Competitive Risk Sharing Contracts with One-sided Commitment" by Dirk Krueger and Harald Uhlig, February 2005.
004 "Value-at-Risk Calculations with Time Varying Copulae" by Enzo Giacomini and Wolfgang Härdle, February 2005.
005 "An Optimal Stopping Problem in a Diffusion-type Model with Delay" by Pavel V. Gapeev and Markus Reiß, February 2005.
006 "Conditional and Dynamic Convex Risk Measures" by Kai Detlefsen and Giacomo Scandolo, February 2005.
007 "Implied Trinomial Trees" by Pavel Cízek and Karel Komorád, February 2005.
008 "Stable Distributions" by Szymon Borak, Wolfgang Härdle and Rafal Weron, February 2005.
009 "Predicting Bankruptcy with Support Vector Machines" by Wolfgang Härdle, Rouslan A. Moro and Dorothea Schäfer, February 2005.
010 "Working with the XQC" by Wolfgang Härdle and Heiko Lehmann, February 2005.
011 "FFT Based Option Pricing" by Szymon Borak, Kai Detlefsen and Wolfgang Härdle, February 2005.
012 "Common Functional Implied Volatility Analysis" by Michal Benko and Wolfgang Härdle, February 2005.
013 "Nonparametric Productivity Analysis" by Wolfgang Härdle and Seok-Oh Jeong, March 2005.
014 "Are Eastern European Countries Catching Up? Time Series Evidence for Czech Republic, Hungary, and Poland" by Ralf Brüggemann and Carsten Trenkler, March 2005.
015 "Robust Estimation of Dimension Reduction Space" by Pavel Cízek and Wolfgang Härdle, March 2005.
016 "Common Functional Component Modelling" by Alois Kneip and Michal Benko, March 2005.
017 "A Two State Model for Noise-induced Resonance in Bistable Systems with Delay" by Markus Fischer and Peter Imkeller, March 2005.
018 "Yxilon ­ a Modular Open-source Statistical Programming Language" by Sigbert Klinke, Uwe Ziegenhagen and Yuval Guri, March 2005.
019 "Arbitrage-free Smoothing of the Implied Volatility Surface" by Matthias R. Fengler, March 2005.
020 "A Dynamic Semiparametric Factor Model for Implied Volatility String Dynamics" by Matthias R. Fengler, Wolfgang Härdle and Enno Mammen, March 2005.
021 "Dynamics of State Price Densities" by Wolfgang Härdle and Zdenk Hlávka, March 2005.
022 "DSFM fitting of Implied Volatility Surfaces" by Szymon Borak, Matthias R. Fengler and Wolfgang Härdle, March 2005.
SFB 649, Spandauer Straße 1, D-10178 Berlin http://sfb649.wiwi.hu-berlin.de
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

023 "Towards a Monthly Business Cycle Chronology for the Euro Area" by Emanuel Mönch and Harald Uhlig, April 2005.
024 "Modeling the FIBOR/EURIBOR Swap Term Structure: An Empirical Approach" by Oliver Blaskowitz, Helmut Herwartz and Gonzalo de Cadenas Santiago, April 2005.
025 "Duality Theory for Optimal Investments under Model Uncertainty" by Alexander Schied and Ching-Tang Wu, April 2005.
026 "Projection Pursuit For Exploratory Supervised Classification" by EunKyung Lee, Dianne Cook, Sigbert Klinke and Thomas Lumley, May 2005.
027 "Money Demand and Macroeconomic Stability Revisited" by Andreas Schabert and Christian Stoltenberg, May 2005.
028 "A Market Basket Analysis Conducted with a Multivariate Logit Model" by Yasemin Boztu and Lutz Hildebrandt, May 2005.
029 "Utility Duality under Additional Information: Conditional Measures versus Filtration Enlargements" by Stefan Ankirchner, May 2005.
030 "The Shannon Information of Filtrations and the Additional Logarithmic Utility of Insiders" by Stefan Ankirchner, Steffen Dereich and Peter Imkeller, May 2005.
031 "Does Temporary Agency Work Provide a Stepping Stone to Regular Employment?" by Michael Kvasnicka, May 2005.
032 "Working Time as an Investment? ­ The Effects of Unpaid Overtime on Wages, Promotions and Layoffs" by Silke Anger, June 2005.
033 "Notes on an Endogenous Growth Model with two Capital Stocks II: The Stochastic Case" by Dirk Bethmann, June 2005.
034 "Skill Mismatch in Equilibrium Unemployment" by Ronald Bachmann, June 2005.
035 "Uncovered Interest Rate Parity and the Expectations Hypothesis of the Term Structure: Empirical Results for the U.S. and Europe" by Ralf Brüggemann and Helmut Lütkepohl, April 2005.
036 "Getting Used to Risks: Reference Dependence and Risk Inclusion" by Astrid Matthey, May 2005.
037 "New Evidence on the Puzzles. Results from Agnostic Identification on Monetary Policy and Exchange Rates." by Almuth Scholl and Harald Uhlig, July 2005.
038 "Discretisation of Stochastic Control Problems for Continuous Time Dynamics with Delay" by Markus Fischer and Markus Reiss, August 2005.
039 "What are the Effects of Fiscal Policy Shocks?" by Andrew Mountford and Harald Uhlig, July 2005.
040 "Optimal Sticky Prices under Rational Inattention" by Bartosz Makowiak and Mirko Wiederholt, July 2005.
041 "Fixed-Prize Tournaments versus First-Price Auctions in Innovation Contests" by Anja Schöttner, August 2005.
042 "Bank finance versus bond finance: what explains the differences between US and Europe?" by Fiorella De Fiore and Harald Uhlig, August 2005.
043 "On Local Times of Ranked Continuous Semimartingales; Application to Portfolio Generating Functions" by Raouf Ghomrasni, June 2005.
044 "A Software Framework for Data Based Analysis" by Markus Krätzig, August 2005.
045 "Labour Market Dynamics in Germany: Hirings, Separations, and Job-toJob Transitions over the Business Cycle" by Ronald Bachmann, September 2005.
SFB 649, Spandauer Straße 1, D-10178 Berlin http://sfb649.wiwi.hu-berlin.de
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

046 "Paternal Uncertainty and the Economics of Mating, Marriage, and Parental Investment in Children" by Dirk Bethmann and Michael Kvasnicka, September 2005.
047 "Estimation and Testing for Varying Coeffcients in Additive Models with Marginal Integration " by Lijian Yang, Byeong U. Park, Lan Xue and Wolfgang Härdle, September 2005.
048 "Zeitarbeit in Deutschland: Trends und Perspektiven" by Michael C. Burda and Michael Kvasnicka, September 2005.
049 "Courtesy and Idleness: Gender Differences in Team Work and Team Competition" by Radosveta Ivanova-Stenzel and Dorothea Kübler, September 2005.
050 "Do Factor Shares Reflect Technology?" by Benjamin Bental and Domonique Demougin, September 2005.
051 "Optimal investments for risk- and ambiguity-averse preferences: A duality approach" by Alexander Schied, September 2005.
SFB 649, Spandauer Straße 1, D-10178 Berlin http://sfb649.wiwi.hu-berlin.de
This research was supported by the Deutsche Forschungsgemeinschaft through the SFB 649 "Economic Risk".

